#lang racket/base

(require "../../../../parser/data-definitions/data-definitions.rkt"
         "../../../../parser/functions/file.rkt"
         "../../../../parser/functions/spine-parser.rkt"
         "../../../../parser/data-structures/humdrum-graph/data-definitions/data-definitions.rkt"
         "../../../../parser/data-structures/humdrum-graph/functions/hgraph-to-hfile.rkt"
         "../../../../parser/data-structures/humdrum-graph/functions/hfile-to-hgraph.rkt"
         "../../../../parser/data-structures/linked-spine/data-definitions/data-definitions.rkt"
         "../../../../parser/data-structures/linked-spine/functions/gspines-to-linked-spines.rkt"
         test-engine/racket-tests)

;; Node definitions
(define TERM-35-0 (terminator-node (token "*-" 'SpineTerminator 35 0)))
(define M-34-0 (token-node (token "==" 'Measure 34 0) (box-immutable TERM-35-0)))
(define J-33-0 (token-node (token "*v" 'SpineJoin 33 0) (box-immutable M-34-0)))
(define J-33-1 (token-node (token "*v" 'SpineJoin 33 1) (box-immutable M-34-0)))
(define NULL-32-0 (token-node (token "*" 'NullInterpretation 32 0) (box-immutable J-33-0)))
(define J-32-1 (token-node (token "*v" 'SpineJoin 32 1) (box-immutable J-33-1)))
(define J-32-2 (token-node (token "*v" 'SpineJoin 32 2) (box-immutable J-33-1)))
(define NULL-31-0 (token-node (token "*" 'NullInterpretation 31 0) (box-immutable NULL-32-0)))
(define NULL-31-1 (token-node (token "*" 'NullInterpretation 31 1) (box-immutable J-32-1)))
(define J-31-2 (token-node (token "*v" 'SpineJoin 31 2) (box-immutable J-32-2)))
(define J-31-3 (token-node (token "*v" 'SpineJoin 31 3) (box-immutable J-32-2)))
(define NULL-30-0 (token-node (token "*" 'NullInterpretation 30 0) (box-immutable NULL-31-0)))
(define NULL-30-1 (token-node (token "*" 'NullInterpretation 30 1) (box-immutable NULL-31-1)))
(define NULL-30-2 (token-node (token "*" 'NullInterpretation 30 2) (box-immutable J-31-2)))
(define NULL-30-3 (token-node (token "*" 'NullInterpretation 30 3) (box-immutable J-31-3)))
(define NULL-29-0 (token-node (token "*" 'NullInterpretation 29 0) (box-immutable NULL-30-0)))
(define NULL-29-1 (token-node (token "*" 'NullInterpretation 29 1) (box-immutable NULL-30-1)))
(define NULL-29-2 (token-node (token "*" 'NullInterpretation 29 2) (box-immutable NULL-30-2)))
(define NULL-29-3 (token-node (token "*" 'NullInterpretation 29 3) (box-immutable NULL-30-3)))
(define NULL-28-0 (token-node (token "*" 'NullInterpretation 28 0) (box-immutable NULL-29-0)))
(define NULL-28-1 (token-node (token "*" 'NullInterpretation 28 1) (box-immutable NULL-29-1)))
(define NULL-28-2 (token-node (token "*" 'NullInterpretation 28 2) (box-immutable NULL-29-2)))
(define NULL-28-3 (token-node (token "*" 'NullInterpretation 28 3) (box-immutable NULL-29-3)))
(define NULL-27-0 (token-node (token "*" 'NullInterpretation 27 0) (box-immutable NULL-28-0)))
(define NULL-27-1 (token-node (token "*" 'NullInterpretation 27 1) (box-immutable NULL-28-1)))
(define NULL-27-2 (token-node (token "*" 'NullInterpretation 27 2) (box-immutable NULL-28-2)))
(define NULL-27-3 (token-node (token "*" 'NullInterpretation 27 3) (box-immutable NULL-28-3)))
(define NULL-26-0 (token-node (token "*" 'NullInterpretation 26 0) (box-immutable NULL-27-0)))
(define NULL-26-1 (token-node (token "*" 'NullInterpretation 26 1) (box-immutable NULL-27-1)))
(define NULL-26-2 (token-node (token "*" 'NullInterpretation 26 2) (box-immutable NULL-27-2)))
(define NULL-26-3 (token-node (token "*" 'NullInterpretation 26 3) (box-immutable NULL-27-3)))
(define NULL-25-0 (token-node (token "*" 'NullInterpretation 25 0) (box-immutable NULL-26-0)))
(define NULL-25-1 (token-node (token "*" 'NullInterpretation 25 1) (box-immutable NULL-26-1)))
(define NULL-25-2 (token-node (token "*" 'NullInterpretation 25 2) (box-immutable NULL-26-2)))
(define NULL-25-3 (token-node (token "*" 'NullInterpretation 25 3) (box-immutable NULL-26-3)))
(define 4c-24-0 (token-node (token "4c" 'SpineData 24 0) (box-immutable NULL-25-0)))
(define 4c-24-1 (token-node (token "4c" 'SpineData 24 1) (box-immutable NULL-25-1)))
(define 4c-24-2 (token-node (token "4c" 'SpineData 24 2) (box-immutable NULL-25-2)))
(define 4c-24-3 (token-node (token "4c" 'SpineData 24 3) (box-immutable NULL-25-3)))
(define 4c-23-0 (token-node (token "4c" 'SpineData 23 0) (box-immutable 4c-24-0)))
(define 4c-23-1 (token-node (token "4c" 'SpineData 23 1) (box-immutable 4c-24-1)))
(define 4c-23-2 (token-node (token "4c" 'SpineData 23 2) (box-immutable 4c-24-2)))
(define 4c-23-3 (token-node (token "4c" 'SpineData 23 3) (box-immutable 4c-24-3)))
(define 4c-22-0 (token-node (token "4c" 'SpineData 22 0) (box-immutable 4c-23-0)))
(define 4c-22-1 (token-node (token "4c" 'SpineData 22 1) (box-immutable 4c-23-1)))
(define 4c-22-2 (token-node (token "4c" 'SpineData 22 2) (box-immutable 4c-23-2)))
(define 4c-22-3 (token-node (token "4c" 'SpineData 22 3) (box-immutable 4c-23-3)))
(define M-21-0 (token-node (token "=3" 'Measure 21 0) (box-immutable 4c-22-0)))
(define M-21-1 (token-node (token "=3" 'Measure 21 1) (box-immutable 4c-22-1)))
(define M-21-2 (token-node (token "=3" 'Measure 21 2) (box-immutable 4c-22-2)))
(define M-21-3 (token-node (token "=3" 'Measure 21 3) (box-immutable 4c-22-3)))
(define 4c-20-0 (token-node (token "4c" 'SpineData 20 0) (box-immutable M-21-0)))
(define 4c-20-1 (token-node (token "4c" 'SpineData 20 1) (box-immutable M-21-1)))
(define 4c-20-2 (token-node (token "4c" 'SpineData 20 2) (box-immutable M-21-2)))
(define 4c-20-3 (token-node (token "4c" 'SpineData 20 3) (box-immutable M-21-3)))
(define 4c-19-0 (token-node (token "4c" 'SpineData 19 0) (box-immutable 4c-20-0)))
(define 4c-19-1 (token-node (token "4c" 'SpineData 19 1) (box-immutable 4c-20-1)))
(define 4c-19-2 (token-node (token "4c" 'SpineData 19 2) (box-immutable 4c-20-2)))
(define 4c-19-3 (token-node (token "4c" 'SpineData 19 3) (box-immutable 4c-20-3)))
(define 4c-18-0 (token-node (token "4c" 'SpineData 18 0) (box-immutable 4c-19-0)))
(define 4c-18-1 (token-node (token "4c" 'SpineData 18 1) (box-immutable 4c-19-1)))
(define 4c-18-2 (token-node (token "4c" 'SpineData 18 2) (box-immutable 4c-19-2)))
(define 4c-18-3 (token-node (token "4c" 'SpineData 18 3) (box-immutable 4c-19-3)))
(define M-17-0 (token-node (token "=2" 'Measure 17 0) (box-immutable 4c-18-0)))
(define M-17-1 (token-node (token "=2" 'Measure 17 1) (box-immutable 4c-18-1)))
(define M-17-2 (token-node (token "=2" 'Measure 17 2) (box-immutable 4c-18-2)))
(define M-17-3 (token-node (token "=2" 'Measure 17 3) (box-immutable 4c-18-3)))
(define 4c-16-0 (token-node (token "4c" 'SpineData 16 0) (box-immutable M-17-0)))
(define 4c-16-1 (token-node (token "4c" 'SpineData 16 1) (box-immutable M-17-1)))
(define 4c-16-2 (token-node (token "4c" 'SpineData 16 2) (box-immutable M-17-2)))
(define 4c-16-3 (token-node (token "4c" 'SpineData 16 3) (box-immutable M-17-3)))
(define 4c-15-0 (token-node (token "4c" 'SpineData 15 0) (box-immutable 4c-16-0)))
(define 4c-15-1 (token-node (token "4c" 'SpineData 15 1) (box-immutable 4c-16-1)))
(define 4c-15-2 (token-node (token "4c" 'SpineData 15 2) (box-immutable 4c-16-2)))
(define 4c-15-3 (token-node (token "4c" 'SpineData 15 3) (box-immutable 4c-16-3)))
(define 4c-14-0 (token-node (token "4c" 'SpineData 14 0) (box-immutable 4c-15-0)))
(define 4c-14-1 (token-node (token "4c" 'SpineData 14 1) (box-immutable 4c-15-1)))
(define 4c-14-2 (token-node (token "4c" 'SpineData 14 2) (box-immutable 4c-15-2)))
(define 4c-14-3 (token-node (token "4c" 'SpineData 14 3) (box-immutable 4c-15-3)))
(define NULL-13-0 (token-node (token "*" 'NullInterpretation 13 0) (box-immutable 4c-14-0)))
(define NULL-13-1 (token-node (token "*" 'NullInterpretation 13 1) (box-immutable 4c-14-1)))
(define NULL-13-2 (token-node (token "*" 'NullInterpretation 13 2) (box-immutable 4c-14-2)))
(define NULL-13-3 (token-node (token "*" 'NullInterpretation 13 3) (box-immutable 4c-14-3)))
(define NULL-12-0 (token-node (token "*" 'NullInterpretation 12 0) (box-immutable NULL-13-0)))
(define NULL-12-1 (token-node (token "*" 'NullInterpretation 12 1) (box-immutable NULL-13-1)))
(define NULL-12-2 (token-node (token "*" 'NullInterpretation 12 2) (box-immutable NULL-13-2)))
(define NULL-12-3 (token-node (token "*" 'NullInterpretation 12 3) (box-immutable NULL-13-3)))
(define NULL-11-0 (token-node (token "*" 'NullInterpretation 11 0) (box-immutable NULL-12-0)))
(define NULL-11-1 (token-node (token "*" 'NullInterpretation 11 1) (box-immutable NULL-12-1)))
(define NULL-11-2 (token-node (token "*" 'NullInterpretation 11 2) (box-immutable NULL-12-2)))
(define NULL-11-3 (token-node (token "*" 'NullInterpretation 11 3) (box-immutable NULL-12-3)))
(define NULL-10-0 (token-node (token "*" 'NullInterpretation 10 0) (box-immutable NULL-11-0)))
(define NULL-10-1 (token-node (token "*" 'NullInterpretation 10 1) (box-immutable NULL-11-1)))
(define NULL-10-2 (token-node (token "*" 'NullInterpretation 10 2) (box-immutable NULL-11-2)))
(define NULL-10-3 (token-node (token "*" 'NullInterpretation 10 3) (box-immutable NULL-11-3)))
(define NULL-9-0 (token-node (token "*" 'NullInterpretation 9 0) (box-immutable NULL-10-0)))
(define NULL-9-1 (token-node (token "*" 'NullInterpretation 9 1) (box-immutable NULL-10-1)))
(define NULL-9-2 (token-node (token "*" 'NullInterpretation 9 2) (box-immutable NULL-10-2)))
(define NULL-9-3 (token-node (token "*" 'NullInterpretation 9 3) (box-immutable NULL-10-3)))
(define NULL-8-0 (token-node (token "*" 'NullInterpretation 8 0) (box-immutable NULL-9-0)))
(define NULL-8-1 (token-node (token "*" 'NullInterpretation 8 1) (box-immutable NULL-9-1)))
(define NULL-8-2 (token-node (token "*" 'NullInterpretation 8 2) (box-immutable NULL-9-2)))
(define NULL-8-3 (token-node (token "*" 'NullInterpretation 8 3) (box-immutable NULL-9-3)))
(define NULL-7-0 (token-node (token "*" 'NullInterpretation 7 0) (box-immutable NULL-8-0)))
(define NULL-7-1 (token-node (token "*" 'NullInterpretation 7 1) (box-immutable NULL-8-1)))
(define S-7-2 (split-node (token "*^" 'SpineSplit 7 2)
                          (box-immutable NULL-8-2)
                          (box-immutable NULL-8-3))) 
(define NULL-6-0 (token-node (token "*" 'NullInterpretation 6 0) (box-immutable NULL-7-0)))
(define S-6-1 (split-node (token "*^" 'SpineSplit 6 1)
                          (box-immutable NULL-7-1)
                          (box-immutable S-7-2)))
(define S-5-0 (split-node (token "*^" 'SpineSplit 5 0)
                          (box-immutable NULL-6-0)
                          (box-immutable S-6-1)))
(define TS-4-0 (token-node (token "*M3/4" 'TimeSignature 4 0) (box-immutable S-5-0)))
(define KL-3-0 (token-node (token "*a:" 'KeyLabel 3 0) (box-immutable TS-4-0)))
(define KS-2-0 (token-node (token "*k[]" 'KeySignature 2 0) (box-immutable KL-3-0)))
(define CL-1-0 (token-node (token "*clefG2" 'Clef 1 0) (box-immutable KS-2-0)))
(define KERN-0-0 (token-node (token "**kern" EXCLUSIVE-INTERPRETATION 0 0) (box-immutable CL-1-0)))

(define TERM-35-1 (terminator-node (token "*-" 'SpineTerminator 35 1)))
(define M-34-1 (token-node (token "==" 'Measure 34 1) (box-immutable TERM-35-1)))
(define NULL-33-2 (token-node (token "*" 'NullInterpretation 33 2) (box-immutable M-34-1)))
(define NULL-32-3 (token-node (token "*" 'NullInterpretation 32 3) (box-immutable NULL-33-2)))
(define NULL-31-4 (token-node (token "*" 'NullInterpretation 31 4) (box-immutable NULL-32-3)))
(define J-30-4 (token-node (token "*v" 'SpineJoin 30 4) (box-immutable NULL-31-4)))
(define J-30-5 (token-node (token "*v" 'SpineJoin 30 5) (box-immutable NULL-31-4)))
(define NULL-29-4 (token-node (token "*" 'NullInterpretation 29 4) (box-immutable J-30-4)))
(define J-29-5 (token-node (token "*v" 'SpineJoin 29 5) (box-immutable J-30-5)))
(define J-29-6 (token-node (token "*v" 'SpineJoin 29 6) (box-immutable J-30-5)))
(define NULL-28-4 (token-node (token "*" 'NullInterpretation 28 4) (box-immutable NULL-29-4)))
(define NULL-28-5 (token-node (token "*" 'NullInterpretation 28 5) (box-immutable J-29-5)))
(define J-28-6 (token-node (token "*v" 'SpineJoin 28 6) (box-immutable J-29-6)))
(define J-28-7 (token-node (token "*v" 'SpineJoin 28 7) (box-immutable J-29-6)))
(define NULL-27-4 (token-node (token "*" 'NullInterpretation 27 4) (box-immutable NULL-28-4)))
(define NULL-27-5 (token-node (token "*" 'NullInterpretation 27 5) (box-immutable NULL-28-5)))
(define NULL-27-6 (token-node (token "*" 'NullInterpretation 27 6) (box-immutable J-28-6)))
(define NULL-27-7 (token-node (token "*" 'NullInterpretation 27 7) (box-immutable J-28-7)))
(define NULL-26-4 (token-node (token "*" 'NullInterpretation 26 4) (box-immutable NULL-27-4)))
(define NULL-26-5 (token-node (token "*" 'NullInterpretation 26 5) (box-immutable NULL-27-5)))
(define NULL-26-6 (token-node (token "*" 'NullInterpretation 26 6) (box-immutable NULL-27-6)))
(define NULL-26-7 (token-node (token "*" 'NullInterpretation 26 7) (box-immutable NULL-27-7)))
(define NULL-25-4 (token-node (token "*" 'NullInterpretation 25 4) (box-immutable NULL-26-4)))
(define NULL-25-5 (token-node (token "*" 'NullInterpretation 25 5) (box-immutable NULL-26-5)))
(define NULL-25-6 (token-node (token "*" 'NullInterpretation 25 6) (box-immutable NULL-26-6)))
(define NULL-25-7 (token-node (token "*" 'NullInterpretation 25 7) (box-immutable NULL-26-7)))
(define 4c-24-4 (token-node (token "4c" 'SpineData 24 4) (box-immutable NULL-25-4)))
(define 4c-24-5 (token-node (token "4c" 'SpineData 24 5) (box-immutable NULL-25-5)))
(define 4c-24-6 (token-node (token "4c" 'SpineData 24 6) (box-immutable NULL-25-6)))
(define 4c-24-7 (token-node (token "4c" 'SpineData 24 7) (box-immutable NULL-25-7)))
(define 4c-23-4 (token-node (token "4c" 'SpineData 23 4) (box-immutable 4c-24-4)))
(define 4c-23-5 (token-node (token "4c" 'SpineData 23 5) (box-immutable 4c-24-5)))
(define 4c-23-6 (token-node (token "4c" 'SpineData 23 6) (box-immutable 4c-24-6)))
(define 4c-23-7 (token-node (token "4c" 'SpineData 23 7) (box-immutable 4c-24-7)))
(define 4c-22-4 (token-node (token "4c" 'SpineData 22 4) (box-immutable 4c-23-4)))
(define 4c-22-5 (token-node (token "4c" 'SpineData 22 5) (box-immutable 4c-23-5)))
(define 4c-22-6 (token-node (token "4c" 'SpineData 22 6) (box-immutable 4c-23-6)))
(define 4c-22-7 (token-node (token "4c" 'SpineData 22 7) (box-immutable 4c-23-7)))
(define M-21-4 (token-node (token "=3" 'Measure 21 4) (box-immutable 4c-22-4)))
(define M-21-5 (token-node (token "=3" 'Measure 21 5) (box-immutable 4c-22-5)))
(define M-21-6 (token-node (token "=3" 'Measure 21 6) (box-immutable 4c-22-6)))
(define M-21-7 (token-node (token "=3" 'Measure 21 7) (box-immutable 4c-22-7)))
(define 4c-20-4 (token-node (token "4c" 'SpineData 20 4) (box-immutable M-21-4)))
(define 4c-20-5 (token-node (token "4c" 'SpineData 20 5) (box-immutable M-21-5)))
(define 4c-20-6 (token-node (token "4c" 'SpineData 20 6) (box-immutable M-21-6)))
(define 4c-20-7 (token-node (token "4c" 'SpineData 20 7) (box-immutable M-21-7)))
(define 4c-19-4 (token-node (token "4c" 'SpineData 19 4) (box-immutable 4c-20-4)))
(define 4c-19-5 (token-node (token "4c" 'SpineData 19 5) (box-immutable 4c-20-5)))
(define 4c-19-6 (token-node (token "4c" 'SpineData 19 6) (box-immutable 4c-20-6)))
(define 4c-19-7 (token-node (token "4c" 'SpineData 19 7) (box-immutable 4c-20-7)))
(define 4c-18-4 (token-node (token "4c" 'SpineData 18 4) (box-immutable 4c-19-4)))
(define 4c-18-5 (token-node (token "4c" 'SpineData 18 5) (box-immutable 4c-19-5)))
(define 4c-18-6 (token-node (token "4c" 'SpineData 18 6) (box-immutable 4c-19-6)))
(define 4c-18-7 (token-node (token "4c" 'SpineData 18 7) (box-immutable 4c-19-7)))
(define M-17-4 (token-node (token "=2" 'Measure 17 4) (box-immutable 4c-18-4)))
(define M-17-5 (token-node (token "=2" 'Measure 17 5) (box-immutable 4c-18-5)))
(define M-17-6 (token-node (token "=2" 'Measure 17 6) (box-immutable 4c-18-6)))
(define M-17-7 (token-node (token "=2" 'Measure 17 7) (box-immutable 4c-18-7)))
(define 4c-16-4 (token-node (token "4c" 'SpineData 16 4) (box-immutable M-17-4)))
(define 4c-16-5 (token-node (token "4c" 'SpineData 16 5) (box-immutable M-17-5)))
(define 4c-16-6 (token-node (token "4c" 'SpineData 16 6) (box-immutable M-17-6)))
(define 4c-16-7 (token-node (token "4c" 'SpineData 16 7) (box-immutable M-17-7)))
(define 4c-15-4 (token-node (token "4c" 'SpineData 15 4) (box-immutable 4c-16-4)))
(define 4c-15-5 (token-node (token "4c" 'SpineData 15 5) (box-immutable 4c-16-5)))
(define 4c-15-6 (token-node (token "4c" 'SpineData 15 6) (box-immutable 4c-16-6)))
(define 4c-15-7 (token-node (token "4c" 'SpineData 15 7) (box-immutable 4c-16-7)))
(define 4c-14-4 (token-node (token "4c" 'SpineData 14 4) (box-immutable 4c-15-4)))
(define 4c-14-5 (token-node (token "4c" 'SpineData 14 5) (box-immutable 4c-15-5)))
(define 4c-14-6 (token-node (token "4c" 'SpineData 14 6) (box-immutable 4c-15-6)))
(define 4c-14-7 (token-node (token "4c" 'SpineData 14 7) (box-immutable 4c-15-7)))
(define NULL-13-4 (token-node (token "*" 'NullInterpretation 13 4) (box-immutable 4c-14-4)))
(define NULL-13-5 (token-node (token "*" 'NullInterpretation 13 5) (box-immutable 4c-14-5)))
(define NULL-13-6 (token-node (token "*" 'NullInterpretation 13 6) (box-immutable 4c-14-6)))
(define NULL-13-7 (token-node (token "*" 'NullInterpretation 13 7) (box-immutable 4c-14-7)))
(define NULL-12-4 (token-node (token "*" 'NullInterpretation 12 4) (box-immutable NULL-13-4)))
(define NULL-12-5 (token-node (token "*" 'NullInterpretation 12 5) (box-immutable NULL-13-5)))
(define NULL-12-6 (token-node (token "*" 'NullInterpretation 12 6) (box-immutable NULL-13-6)))
(define NULL-12-7 (token-node (token "*" 'NullInterpretation 12 7) (box-immutable NULL-13-7)))
(define NULL-11-4 (token-node (token "*" 'NullInterpretation 11 4) (box-immutable NULL-12-4)))
(define NULL-11-5 (token-node (token "*" 'NullInterpretation 11 5) (box-immutable NULL-12-5)))
(define NULL-11-6 (token-node (token "*" 'NullInterpretation 11 6) (box-immutable NULL-12-6)))
(define NULL-11-7 (token-node (token "*" 'NullInterpretation 11 7) (box-immutable NULL-12-7)))
(define NULL-10-4 (token-node (token "*" 'NullInterpretation 10 4) (box-immutable NULL-11-4)))
(define NULL-10-5 (token-node (token "*" 'NullInterpretation 10 5) (box-immutable NULL-11-5)))
(define S-10-6 (split-node (token "*^" 'SpineSplit 10 6)
                          (box-immutable NULL-11-6)
                          (box-immutable NULL-11-7)))
(define NULL-9-4 (token-node (token "*" 'NullInterpretation 9 4) (box-immutable NULL-10-4)))
(define S-9-5 (split-node (token "*^" 'SpineSplit 9 5)
                          (box-immutable NULL-10-5)
                          (box-immutable S-10-6)))
(define S-8-4 (split-node (token "*^" 'SpineSplit 8 4)
                          (box-immutable NULL-9-4)
                          (box-immutable S-9-5)))
(define NULL-7-3 (token-node (token "*" 'NullInterpretation 7 3) (box-immutable S-8-4)))
(define NULL-6-2 (token-node (token "*" 'NullInterpretation 6 2) (box-immutable NULL-7-3)))
(define NULL-5-1 (token-node (token "*" 'NullInterpretation 5 1) (box-immutable NULL-6-2)))
(define TS-4-1 (token-node (token "*M3/4" 'TimeSignature 4 1) (box-immutable NULL-5-1)))
(define KL-3-1 (token-node (token "*a:" 'KeyLabel 3 1) (box-immutable TS-4-1)))
(define KS-2-1 (token-node (token "*k[]" 'KeySignature 2 1) (box-immutable KL-3-1)))
(define CL-1-1 (token-node (token "*clefG2" 'Clef 1 1) (box-immutable KS-2-1)))
(define KERN-0-1 (token-node (token "**kern" EXCLUSIVE-INTERPRETATION 0 1) (box-immutable CL-1-1)))

(define TERM-35-2 (terminator-node (token "*-" 'SpineTerminator 35 2)))
(define M-34-2 (token-node (token "==" 'Measure 34 2) (box-immutable TERM-35-2)))
(define NULL-33-3 (token-node (token "*" 'NullInterpretation 33 3) (box-immutable M-34-2)))
(define NULL-32-4 (token-node (token "*" 'NullInterpretation 32 4) (box-immutable NULL-33-3)))
(define NULL-31-5 (token-node (token "*" 'NullInterpretation 31 5) (box-immutable NULL-32-4)))
(define NULL-30-6 (token-node (token "*" 'NullInterpretation 30 6) (box-immutable NULL-31-5)))
(define NULL-29-7 (token-node (token "*" 'NullInterpretation 29 7) (box-immutable NULL-30-6)))
(define NULL-28-8 (token-node (token "*" 'NullInterpretation 28 8) (box-immutable NULL-29-7)))
(define J-27-8 (token-node (token "*v" 'SpineJoin 27 8) (box-immutable NULL-28-8)))
(define J-27-9 (token-node (token "*v" 'SpineJoin 27 9) (box-immutable NULL-28-8)))
(define NULL-26-8 (token-node (token "*" 'NullInterpretation 26 8) (box-immutable J-27-8)))
(define J-26-9 (token-node (token "*v" 'SpineJoin 26 9) (box-immutable J-27-9)))
(define J-26-10 (token-node (token "*v" 'SpineJoin 26 10) (box-immutable J-27-9)))
(define NULL-25-8 (token-node (token "*" 'NullInterpretation 25 8) (box-immutable NULL-26-8)))
(define NULL-25-9 (token-node (token "*" 'NullInterpretation 25 9) (box-immutable J-26-9)))
(define J-25-10 (token-node (token "*v" 'SpineJoin 25 10) (box-immutable J-26-10)))
(define J-25-11 (token-node (token "*v" 'SpineJoin 25 11) (box-immutable J-26-10)))
(define 4c-24-8 (token-node (token "4c" 'SpineData 24 8) (box-immutable NULL-25-8)))
(define 4c-24-9 (token-node (token "4c" 'SpineData 24 9) (box-immutable NULL-25-9)))
(define 4c-24-10 (token-node (token "4c" 'SpineData 24 10) (box-immutable J-25-10)))
(define 4c-24-11 (token-node (token "4c" 'SpineData 24 11) (box-immutable J-25-11)))
(define 4c-23-8 (token-node (token "4c" 'SpineData 23 8) (box-immutable 4c-24-8)))
(define 4c-23-9 (token-node (token "4c" 'SpineData 23 9) (box-immutable 4c-24-9)))
(define 4c-23-10 (token-node (token "4c" 'SpineData 23 10) (box-immutable 4c-24-10)))
(define 4c-23-11 (token-node (token "4c" 'SpineData 23 11) (box-immutable 4c-24-11)))
(define 4c-22-8 (token-node (token "4c" 'SpineData 22 8) (box-immutable 4c-23-8)))
(define 4c-22-9 (token-node (token "4c" 'SpineData 22 9) (box-immutable 4c-23-9)))
(define 4c-22-10 (token-node (token "4c" 'SpineData 22 10) (box-immutable 4c-23-10)))
(define 4c-22-11 (token-node (token "4c" 'SpineData 22 11) (box-immutable 4c-23-11)))
(define M-21-8 (token-node (token "=3" 'Measure 21 8) (box-immutable 4c-22-8)))
(define M-21-9 (token-node (token "=3" 'Measure 21 9) (box-immutable 4c-22-9)))
(define M-21-10 (token-node (token "=3" 'Measure 21 10) (box-immutable 4c-22-10)))
(define M-21-11 (token-node (token "=3" 'Measure 21 11) (box-immutable 4c-22-11)))
(define 4c-20-8 (token-node (token "4c" 'SpineData 20 8) (box-immutable M-21-8)))
(define 4c-20-9 (token-node (token "4c" 'SpineData 20 9) (box-immutable M-21-9)))
(define 4c-20-10 (token-node (token "4c" 'SpineData 20 10) (box-immutable M-21-10)))
(define 4c-20-11 (token-node (token "4c" 'SpineData 20 11) (box-immutable M-21-11)))
(define 4c-19-8 (token-node (token "4c" 'SpineData 19 8) (box-immutable 4c-20-8)))
(define 4c-19-9 (token-node (token "4c" 'SpineData 19 9) (box-immutable 4c-20-9)))
(define 4c-19-10 (token-node (token "4c" 'SpineData 19 10) (box-immutable 4c-20-10)))
(define 4c-19-11 (token-node (token "4c" 'SpineData 19 11) (box-immutable 4c-20-11)))
(define 4c-18-8 (token-node (token "4c" 'SpineData 18 8) (box-immutable 4c-19-8)))
(define 4c-18-9 (token-node (token "4c" 'SpineData 18 9) (box-immutable 4c-19-9)))
(define 4c-18-10 (token-node (token "4c" 'SpineData 18 10) (box-immutable 4c-19-10)))
(define 4c-18-11 (token-node (token "4c" 'SpineData 18 11) (box-immutable 4c-19-11)))
(define M-17-8 (token-node (token "=2" 'Measure 17 8) (box-immutable 4c-18-8)))
(define M-17-9 (token-node (token "=2" 'Measure 17 9) (box-immutable 4c-18-9)))
(define M-17-10 (token-node (token "=2" 'Measure 17 10) (box-immutable 4c-18-10)))
(define M-17-11 (token-node (token "=2" 'Measure 17 11) (box-immutable 4c-18-11)))
(define 4c-16-8 (token-node (token "4c" 'SpineData 16 8) (box-immutable M-17-8)))
(define 4c-16-9 (token-node (token "4c" 'SpineData 16 9) (box-immutable M-17-9)))
(define 4c-16-10 (token-node (token "4c" 'SpineData 16 10) (box-immutable M-17-10)))
(define 4c-16-11 (token-node (token "4c" 'SpineData 16 11) (box-immutable M-17-11)))
(define 4c-15-8 (token-node (token "4c" 'SpineData 15 8) (box-immutable 4c-16-8)))
(define 4c-15-9 (token-node (token "4c" 'SpineData 15 9) (box-immutable 4c-16-9)))
(define 4c-15-10 (token-node (token "4c" 'SpineData 15 10) (box-immutable 4c-16-10)))
(define 4c-15-11 (token-node (token "4c" 'SpineData 15 11) (box-immutable 4c-16-11)))
(define 4c-14-8 (token-node (token "4c" 'SpineData 14 8) (box-immutable 4c-15-8)))
(define 4c-14-9 (token-node (token "4c" 'SpineData 14 9) (box-immutable 4c-15-9)))
(define 4c-14-10 (token-node (token "4c" 'SpineData 14 10) (box-immutable 4c-15-10)))
(define 4c-14-11 (token-node (token "4c" 'SpineData 14 11) (box-immutable 4c-15-11)))
(define NULL-13-8 (token-node (token "*" 'NullInterpretation 13 8) (box-immutable 4c-14-8)))
(define NULL-13-9 (token-node (token "*" 'NullInterpretation 13 9) (box-immutable 4c-14-9)))
(define S-13-10 (split-node (token "*^" 'SpineSplit 13 10)
                            (box-immutable 4c-14-10)
                            (box-immutable 4c-14-11)))
(define NULL-12-8 (token-node (token "*" 'NullInterpretation 12 8) (box-immutable NULL-13-8)))
(define S-12-9 (split-node (token "*^" 'SpineSplit 12 9)
                           (box-immutable NULL-13-9)
                           (box-immutable S-13-10)))
(define S-11-8 (split-node (token "*^" 'SpineSplit 11 8)
                           (box-immutable NULL-12-8)
                           (box-immutable S-12-9)))
(define NULL-10-7 (token-node (token "*" 'NullInterpretation 10 7) (box-immutable S-11-8)))
(define NULL-9-6 (token-node (token "*" 'NullInterpretation 9 6) (box-immutable NULL-10-7)))
(define NULL-8-5 (token-node (token "*" 'NullInterpretation 8 5) (box-immutable NULL-9-6)))
(define NULL-7-4 (token-node (token "*" 'NullInterpretation 7 4) (box-immutable NULL-8-5)))
(define NULL-6-3 (token-node (token "*" 'NullInterpretation 6 3) (box-immutable NULL-7-4)))
(define NULL-5-2 (token-node (token "*" 'NullInterpretation 5 2) (box-immutable NULL-6-3)))
(define TS-4-2 (token-node (token "*M3/4" 'TimeSignature 4 2) (box-immutable NULL-5-2)))
(define KL-3-2 (token-node (token "*a:" 'KeyLabel 3 2) (box-immutable TS-4-2)))
(define KS-2-2 (token-node (token "*k[]" 'KeySignature 2 2) (box-immutable KL-3-2)))
(define CL-1-2 (token-node (token "*clefG2" 'Clef 1 2) (box-immutable KS-2-2)))
(define KERN-0-2 (token-node (token "**kern" EXCLUSIVE-INTERPRETATION 0 2) (box-immutable CL-1-2)))

(check-expect (path->hfile "../../data/count/three-spines-three-splits.krn")
              (hfile (list (record "**kern\t**kern\t**kern" TOKEN
                                   (list (token "**kern" EXCLUSIVE-INTERPRETATION 0 0)
                                         (token "**kern" EXCLUSIVE-INTERPRETATION 0 1)
                                         (token "**kern" EXCLUSIVE-INTERPRETATION 0 2))
                                   0)
                           (record "*clefG2\t*clefG2\t*clefG2" TOKEN
                                   (list (token "*clefG2" 'Clef 1 0)
                                         (token "*clefG2" 'Clef 1 1)
                                         (token "*clefG2" 'Clef 1 2))
                                   1)
                           (record "*k[]\t*k[]\t*k[]" TOKEN
                                   (list (token "*k[]" 'KeySignature 2 0)
                                         (token "*k[]" 'KeySignature 2 1)
                                         (token "*k[]" 'KeySignature 2 2))
                                   2)
                           (record "*a:\t*a:\t*a:" TOKEN
                                   (list (token "*a:" 'KeyLabel 3 0)
                                         (token "*a:" 'KeyLabel 3 1)
                                         (token "*a:" 'KeyLabel 3 2))
                                   3)
                           (record "*M3/4\t*M3/4\t*M3/4" TOKEN
                                   (list (token "*M3/4" 'TimeSignature 4 0)
                                         (token "*M3/4" 'TimeSignature 4 1)
                                         (token "*M3/4" 'TimeSignature 4 2))
                                   4)
                           (record "*^\t*\t*" TOKEN
                                   (list (token "*^" 'SpineSplit 5 0)
                                         (token "*" 'NullInterpretation 5 1)
                                         (token "*" 'NullInterpretation 5 2))
                                   5)
                           (record "*\t*^\t*\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 6 0)
                                         (token "*^" 'SpineSplit 6 1)
                                         (token "*" 'NullInterpretation 6 2)
                                         (token "*" 'NullInterpretation 6 3))
                                   6)
                           (record "*\t*\t*^\t*\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 7 0)
                                         (token "*" 'NullInterpretation 7 1)
                                         (token "*^" 'SpineSplit 7 2)
                                         (token "*" 'NullInterpretation 7 3)
                                         (token "*" 'NullInterpretation 7 4))
                                   7)
                           (record "*\t*\t*\t*\t*^\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 8 0)
                                         (token "*" 'NullInterpretation 8 1)
                                         (token "*" 'NullInterpretation 8 2)
                                         (token "*" 'NullInterpretation 8 3)
                                         (token "*^" 'SpineSplit 8 4)
                                         (token "*" 'NullInterpretation 8 5))
                                   8)
                           (record "*\t*\t*\t*\t*\t*^\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 9 0)
                                         (token "*" 'NullInterpretation 9 1)
                                         (token "*" 'NullInterpretation 9 2)
                                         (token "*" 'NullInterpretation 9 3)
                                         (token "*" 'NullInterpretation 9 4)
                                         (token "*^" 'SpineSplit 9 5)
                                         (token "*" 'NullInterpretation 9 6))
                                   9)
                           (record "*\t*\t*\t*\t*\t*\t*^\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 10 0)
                                         (token "*" 'NullInterpretation 10 1)
                                         (token "*" 'NullInterpretation 10 2)
                                         (token "*" 'NullInterpretation 10 3)
                                         (token "*" 'NullInterpretation 10 4)
                                         (token "*" 'NullInterpretation 10 5)
                                         (token "*^" 'SpineSplit 10 6)
                                         (token "*" 'NullInterpretation 10 7))
                                   10)
                           (record "*\t*\t*\t*\t*\t*\t*\t*\t*^" TOKEN
                                   (list (token "*" 'NullInterpretation 11 0)
                                         (token "*" 'NullInterpretation 11 1)
                                         (token "*" 'NullInterpretation 11 2)
                                         (token "*" 'NullInterpretation 11 3)
                                         (token "*" 'NullInterpretation 11 4)
                                         (token "*" 'NullInterpretation 11 5)
                                         (token "*" 'NullInterpretation 11 6)
                                         (token "*" 'NullInterpretation 11 7)
                                         (token "*^" 'SpineSplit 11 8))
                                   11)
                           (record "*\t*\t*\t*\t*\t*\t*\t*\t*\t*^" TOKEN
                                   (list (token "*" 'NullInterpretation 12 0)
                                         (token "*" 'NullInterpretation 12 1)
                                         (token "*" 'NullInterpretation 12 2)
                                         (token "*" 'NullInterpretation 12 3)
                                         (token "*" 'NullInterpretation 12 4)
                                         (token "*" 'NullInterpretation 12 5)
                                         (token "*" 'NullInterpretation 12 6)
                                         (token "*" 'NullInterpretation 12 7)
                                         (token "*" 'NullInterpretation 12 8)
                                         (token "*^" 'SpineSplit 12 9))
                                   12)
                           (record "*\t*\t*\t*\t*\t*\t*\t*\t*\t*\t*^" TOKEN
                                   (list (token "*" 'NullInterpretation 13 0)
                                         (token "*" 'NullInterpretation 13 1)
                                         (token "*" 'NullInterpretation 13 2)
                                         (token "*" 'NullInterpretation 13 3)
                                         (token "*" 'NullInterpretation 13 4)
                                         (token "*" 'NullInterpretation 13 5)
                                         (token "*" 'NullInterpretation 13 6)
                                         (token "*" 'NullInterpretation 13 7)
                                         (token "*" 'NullInterpretation 13 8)
                                         (token "*" 'NullInterpretation 13 9)
                                         (token "*^" 'SpineSplit 13 10))
                                   13)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 14 0)
                                         (token "4c" 'SpineData 14 1)
                                         (token "4c" 'SpineData 14 2)
                                         (token "4c" 'SpineData 14 3)
                                         (token "4c" 'SpineData 14 4)
                                         (token "4c" 'SpineData 14 5)
                                         (token "4c" 'SpineData 14 6)
                                         (token "4c" 'SpineData 14 7)
                                         (token "4c" 'SpineData 14 8)
                                         (token "4c" 'SpineData 14 9)
                                         (token "4c" 'SpineData 14 10)
                                         (token "4c" 'SpineData 14 11))
                                   14)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 15 0)
                                         (token "4c" 'SpineData 15 1)
                                         (token "4c" 'SpineData 15 2)
                                         (token "4c" 'SpineData 15 3)
                                         (token "4c" 'SpineData 15 4)
                                         (token "4c" 'SpineData 15 5)
                                         (token "4c" 'SpineData 15 6)
                                         (token "4c" 'SpineData 15 7)
                                         (token "4c" 'SpineData 15 8)
                                         (token "4c" 'SpineData 15 9)
                                         (token "4c" 'SpineData 15 10)
                                         (token "4c" 'SpineData 15 11))
                                   15)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 16 0)
                                         (token "4c" 'SpineData 16 1)
                                         (token "4c" 'SpineData 16 2)
                                         (token "4c" 'SpineData 16 3)
                                         (token "4c" 'SpineData 16 4)
                                         (token "4c" 'SpineData 16 5)
                                         (token "4c" 'SpineData 16 6)
                                         (token "4c" 'SpineData 16 7)
                                         (token "4c" 'SpineData 16 8)
                                         (token "4c" 'SpineData 16 9)
                                         (token "4c" 'SpineData 16 10)
                                         (token "4c" 'SpineData 16 11))
                                   16)
                           (record "=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2" TOKEN
                                   (list (token "=2" 'Measure 17 0)
                                         (token "=2" 'Measure 17 1)
                                         (token "=2" 'Measure 17 2)
                                         (token "=2" 'Measure 17 3)
                                         (token "=2" 'Measure 17 4)
                                         (token "=2" 'Measure 17 5)
                                         (token "=2" 'Measure 17 6)
                                         (token "=2" 'Measure 17 7)
                                         (token "=2" 'Measure 17 8)
                                         (token "=2" 'Measure 17 9)
                                         (token "=2" 'Measure 17 10)
                                         (token "=2" 'Measure 17 11))
                                   17)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 18 0)
                                         (token "4c" 'SpineData 18 1)
                                         (token "4c" 'SpineData 18 2)
                                         (token "4c" 'SpineData 18 3)
                                         (token "4c" 'SpineData 18 4)
                                         (token "4c" 'SpineData 18 5)
                                         (token "4c" 'SpineData 18 6)
                                         (token "4c" 'SpineData 18 7)
                                         (token "4c" 'SpineData 18 8)
                                         (token "4c" 'SpineData 18 9)
                                         (token "4c" 'SpineData 18 10)
                                         (token "4c" 'SpineData 18 11))
                                   18)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 19 0)
                                         (token "4c" 'SpineData 19 1)
                                         (token "4c" 'SpineData 19 2)
                                         (token "4c" 'SpineData 19 3)
                                         (token "4c" 'SpineData 19 4)
                                         (token "4c" 'SpineData 19 5)
                                         (token "4c" 'SpineData 19 6)
                                         (token "4c" 'SpineData 19 7)
                                         (token "4c" 'SpineData 19 8)
                                         (token "4c" 'SpineData 19 9)
                                         (token "4c" 'SpineData 19 10)
                                         (token "4c" 'SpineData 19 11))
                                   19)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 20 0)
                                         (token "4c" 'SpineData 20 1)
                                         (token "4c" 'SpineData 20 2)
                                         (token "4c" 'SpineData 20 3)
                                         (token "4c" 'SpineData 20 4)
                                         (token "4c" 'SpineData 20 5)
                                         (token "4c" 'SpineData 20 6)
                                         (token "4c" 'SpineData 20 7)
                                         (token "4c" 'SpineData 20 8)
                                         (token "4c" 'SpineData 20 9)
                                         (token "4c" 'SpineData 20 10)
                                         (token "4c" 'SpineData 20 11))
                                   20)
                           (record "=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3" TOKEN
                                   (list (token "=3" 'Measure 21 0)
                                         (token "=3" 'Measure 21 1)
                                         (token "=3" 'Measure 21 2)
                                         (token "=3" 'Measure 21 3)
                                         (token "=3" 'Measure 21 4)
                                         (token "=3" 'Measure 21 5)
                                         (token "=3" 'Measure 21 6)
                                         (token "=3" 'Measure 21 7)
                                         (token "=3" 'Measure 21 8)
                                         (token "=3" 'Measure 21 9)
                                         (token "=3" 'Measure 21 10)
                                         (token "=3" 'Measure 21 11))
                                   21)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 22 0)
                                         (token "4c" 'SpineData 22 1)
                                         (token "4c" 'SpineData 22 2)
                                         (token "4c" 'SpineData 22 3)
                                         (token "4c" 'SpineData 22 4)
                                         (token "4c" 'SpineData 22 5)
                                         (token "4c" 'SpineData 22 6)
                                         (token "4c" 'SpineData 22 7)
                                         (token "4c" 'SpineData 22 8)
                                         (token "4c" 'SpineData 22 9)
                                         (token "4c" 'SpineData 22 10)
                                         (token "4c" 'SpineData 22 11))
                                   22)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 23 0)
                                         (token "4c" 'SpineData 23 1)
                                         (token "4c" 'SpineData 23 2)
                                         (token "4c" 'SpineData 23 3)
                                         (token "4c" 'SpineData 23 4)
                                         (token "4c" 'SpineData 23 5)
                                         (token "4c" 'SpineData 23 6)
                                         (token "4c" 'SpineData 23 7)
                                         (token "4c" 'SpineData 23 8)
                                         (token "4c" 'SpineData 23 9)
                                         (token "4c" 'SpineData 23 10)
                                         (token "4c" 'SpineData 23 11))
                                   23)
                           (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                                   (list (token "4c" 'SpineData 24 0)
                                         (token "4c" 'SpineData 24 1)
                                         (token "4c" 'SpineData 24 2)
                                         (token "4c" 'SpineData 24 3)
                                         (token "4c" 'SpineData 24 4)
                                         (token "4c" 'SpineData 24 5)
                                         (token "4c" 'SpineData 24 6)
                                         (token "4c" 'SpineData 24 7)
                                         (token "4c" 'SpineData 24 8)
                                         (token "4c" 'SpineData 24 9)
                                         (token "4c" 'SpineData 24 10)
                                         (token "4c" 'SpineData 24 11))
                                   24)
                           (record "*\t*\t*\t*\t*\t*\t*\t*\t*\t*\t*v\t*v" TOKEN
                                   (list (token "*" 'NullInterpretation 25 0)
                                         (token "*" 'NullInterpretation 25 1)
                                         (token "*" 'NullInterpretation 25 2)
                                         (token "*" 'NullInterpretation 25 3)
                                         (token "*" 'NullInterpretation 25 4)
                                         (token "*" 'NullInterpretation 25 5)
                                         (token "*" 'NullInterpretation 25 6)
                                         (token "*" 'NullInterpretation 25 7)
                                         (token "*" 'NullInterpretation 25 8)
                                         (token "*" 'NullInterpretation 25 9)
                                         (token "*v" 'SpineJoin 25 10)
                                         (token "*v" 'SpineJoin 25 11))
                                   25)
                           (record "*\t*\t*\t*\t*\t*\t*\t*\t*\t*v\t*v" TOKEN
                                   (list (token "*" 'NullInterpretation 26 0)
                                         (token "*" 'NullInterpretation 26 1)
                                         (token "*" 'NullInterpretation 26 2)
                                         (token "*" 'NullInterpretation 26 3)
                                         (token "*" 'NullInterpretation 26 4)
                                         (token "*" 'NullInterpretation 26 5)
                                         (token "*" 'NullInterpretation 26 6)
                                         (token "*" 'NullInterpretation 26 7)
                                         (token "*" 'NullInterpretation 26 8)
                                         (token "*v" 'SpineJoin 26 9)
                                         (token "*v" 'SpineJoin 26 10))
                                   26)
                           (record "*\t*\t*\t*\t*\t*\t*\t*\t*v\t*v" TOKEN
                                   (list (token "*" 'NullInterpretation 27 0)
                                         (token "*" 'NullInterpretation 27 1)
                                         (token "*" 'NullInterpretation 27 2)
                                         (token "*" 'NullInterpretation 27 3)
                                         (token "*" 'NullInterpretation 27 4)
                                         (token "*" 'NullInterpretation 27 5)
                                         (token "*" 'NullInterpretation 27 6)
                                         (token "*" 'NullInterpretation 27 7)
                                         (token "*v" 'SpineJoin 27 8)
                                         (token "*v" 'SpineJoin 27 9))
                                   27)
                           (record "*\t*\t*\t*\t*\t*\t*v\t*v\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 28 0)
                                         (token "*" 'NullInterpretation 28 1)
                                         (token "*" 'NullInterpretation 28 2)
                                         (token "*" 'NullInterpretation 28 3)
                                         (token "*" 'NullInterpretation 28 4)
                                         (token "*" 'NullInterpretation 28 5)
                                         (token "*v" 'SpineJoin 28 6)
                                         (token "*v" 'SpineJoin 28 7)
                                         (token "*" 'NullInterpretation 28 8))
                                   28)
                           (record "*\t*\t*\t*\t*\t*v\t*v\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 29 0)
                                         (token "*" 'NullInterpretation 29 1)
                                         (token "*" 'NullInterpretation 29 2)
                                         (token "*" 'NullInterpretation 29 3)
                                         (token "*" 'NullInterpretation 29 4)
                                         (token "*v" 'SpineJoin 29 5)
                                         (token "*v" 'SpineJoin 29 6)
                                         (token "*" 'NullInterpretation 29 7))
                                   29)
                           (record "*\t*\t*\t*\t*v\t*v\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 30 0)
                                         (token "*" 'NullInterpretation 30 1)
                                         (token "*" 'NullInterpretation 30 2)
                                         (token "*" 'NullInterpretation 30 3)
                                         (token "*v" 'SpineJoin 30 4)
                                         (token "*v" 'SpineJoin 30 5)
                                         (token "*" 'NullInterpretation 30 6))
                                   30)
                           (record "*\t*\t*v\t*v\t*\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 31 0)
                                         (token "*" 'NullInterpretation 31 1)
                                         (token "*v" 'SpineJoin 31 2)
                                         (token "*v" 'SpineJoin 31 3)
                                         (token "*" 'NullInterpretation 31 4)
                                         (token "*" 'NullInterpretation 31 5))
                                   31)
                           (record "*\t*v\t*v\t*\t*" TOKEN
                                   (list (token "*" 'NullInterpretation 32 0)
                                         (token "*v" 'SpineJoin 32 1)
                                         (token "*v" 'SpineJoin 32 2)
                                         (token "*" 'NullInterpretation 32 3)
                                         (token "*" 'NullInterpretation 32 4))
                                   32)
                           (record "*v\t*v\t*\t*" TOKEN
                                   (list (token "*v" 'SpineJoin 33 0)
                                         (token "*v" 'SpineJoin 33 1)
                                         (token "*" 'NullInterpretation 33 2)
                                         (token "*" 'NullInterpretation 33 3))
                                   33)
                           (record "==\t==\t==" TOKEN
                                   (list (token "==" 'Measure 34 0)
                                         (token "==" 'Measure 34 1)
                                         (token "==" 'Measure 34 2))
                                   34)
                           (record "*-\t*-\t*-" TOKEN
                                   (list (token "*-" 'SpineTerminator 35 0)
                                         (token "*-" 'SpineTerminator 35 1)
                                         (token "*-" 'SpineTerminator 35 2))
                                   35))))
(check-expect (spine-parser (path->hfile "../../data/count/three-spines-three-splits.krn"))
              (list (global-spine KERN
                                  (list (list (token "**kern" EXCLUSIVE-INTERPRETATION 0 0))
                                        (list (token "*clefG2" 'Clef 1 0))
                                        (list (token "*k[]" 'KeySignature 2 0))
                                        (list (token "*a:" 'KeyLabel 3 0))
                                        (list (token "*M3/4" 'TimeSignature 4 0))
                                        (list (token "*^" 'SpineSplit 5 0))
                                        (list (token "*" 'NullInterpretation 6 0)
                                              (token "*^" 'SpineSplit 6 1))
                                        (list (token "*" 'NullInterpretation 7 0)
                                              (token "*" 'NullInterpretation 7 1)
                                              (token "*^" 'SpineSplit 7 2))
                                        (list (token "*" 'NullInterpretation 8 0)
                                              (token "*" 'NullInterpretation 8 1)
                                              (token "*" 'NullInterpretation 8 2)
                                              (token "*" 'NullInterpretation 8 3))
                                        (list (token "*" 'NullInterpretation 9 0)
                                              (token "*" 'NullInterpretation 9 1)
                                              (token "*" 'NullInterpretation 9 2)
                                              (token "*" 'NullInterpretation 9 3))
                                        (list (token "*" 'NullInterpretation 10 0)
                                              (token "*" 'NullInterpretation 10 1)
                                              (token "*" 'NullInterpretation 10 2)
                                              (token "*" 'NullInterpretation 10 3))
                                        (list (token "*" 'NullInterpretation 11 0)
                                              (token "*" 'NullInterpretation 11 1)
                                              (token "*" 'NullInterpretation 11 2)
                                              (token "*" 'NullInterpretation 11 3))
                                        (list (token "*" 'NullInterpretation 12 0)
                                              (token "*" 'NullInterpretation 12 1)
                                              (token "*" 'NullInterpretation 12 2)
                                              (token "*" 'NullInterpretation 12 3))
                                        (list (token "*" 'NullInterpretation 13 0)
                                              (token "*" 'NullInterpretation 13 1)
                                              (token "*" 'NullInterpretation 13 2)
                                              (token "*" 'NullInterpretation 13 3))
                                        (list (token "4c" 'SpineData 14 0)
                                              (token "4c" 'SpineData 14 1)
                                              (token "4c" 'SpineData 14 2)
                                              (token "4c" 'SpineData 14 3))
                                        (list (token "4c" 'SpineData 15 0)
                                              (token "4c" 'SpineData 15 1)
                                              (token "4c" 'SpineData 15 2)
                                              (token "4c" 'SpineData 15 3))
                                        (list (token "4c" 'SpineData 16 0)
                                              (token "4c" 'SpineData 16 1)
                                              (token "4c" 'SpineData 16 2)
                                              (token "4c" 'SpineData 16 3))
                                        (list (token "=2" 'Measure 17 0)
                                              (token "=2" 'Measure 17 1)
                                              (token "=2" 'Measure 17 2)
                                              (token "=2" 'Measure 17 3))
                                        (list (token "4c" 'SpineData 18 0)
                                              (token "4c" 'SpineData 18 1)
                                              (token "4c" 'SpineData 18 2)
                                              (token "4c" 'SpineData 18 3))
                                        (list (token "4c" 'SpineData 19 0)
                                              (token "4c" 'SpineData 19 1)
                                              (token "4c" 'SpineData 19 2)
                                              (token "4c" 'SpineData 19 3))
                                        (list (token "4c" 'SpineData 20 0)
                                              (token "4c" 'SpineData 20 1)
                                              (token "4c" 'SpineData 20 2)
                                              (token "4c" 'SpineData 20 3))
                                        (list (token "=3" 'Measure 21 0)
                                              (token "=3" 'Measure 21 1)
                                              (token "=3" 'Measure 21 2)
                                              (token "=3" 'Measure 21 3))
                                        (list (token "4c" 'SpineData 22 0)
                                              (token "4c" 'SpineData 22 1)
                                              (token "4c" 'SpineData 22 2)
                                              (token "4c" 'SpineData 22 3))
                                        (list (token "4c" 'SpineData 23 0)
                                              (token "4c" 'SpineData 23 1)
                                              (token "4c" 'SpineData 23 2)
                                              (token "4c" 'SpineData 23 3))
                                        (list (token "4c" 'SpineData 24 0)
                                              (token "4c" 'SpineData 24 1)
                                              (token "4c" 'SpineData 24 2)
                                              (token "4c" 'SpineData 24 3))
                                        (list (token "*" 'NullInterpretation 25 0)
                                              (token "*" 'NullInterpretation 25 1)
                                              (token "*" 'NullInterpretation 25 2)
                                              (token "*" 'NullInterpretation 25 3))
                                        (list (token "*" 'NullInterpretation 26 0)
                                              (token "*" 'NullInterpretation 26 1)
                                              (token "*" 'NullInterpretation 26 2)
                                              (token "*" 'NullInterpretation 26 3))
                                        (list (token "*" 'NullInterpretation 27 0)
                                              (token "*" 'NullInterpretation 27 1)
                                              (token "*" 'NullInterpretation 27 2)
                                              (token "*" 'NullInterpretation 27 3))
                                        (list (token "*" 'NullInterpretation 28 0)
                                              (token "*" 'NullInterpretation 28 1)
                                              (token "*" 'NullInterpretation 28 2)
                                              (token "*" 'NullInterpretation 28 3))
                                        (list (token "*" 'NullInterpretation 29 0)
                                              (token "*" 'NullInterpretation 29 1)
                                              (token "*" 'NullInterpretation 29 2)
                                              (token "*" 'NullInterpretation 29 3))
                                        (list (token "*" 'NullInterpretation 30 0)
                                              (token "*" 'NullInterpretation 30 1)
                                              (token "*" 'NullInterpretation 30 2)
                                              (token "*" 'NullInterpretation 30 3))
                                        (list (token "*" 'NullInterpretation 31 0)
                                              (token "*" 'NullInterpretation 31 1)
                                              (token "*v" 'SpineJoin 31 2)
                                              (token "*v" 'SpineJoin 31 3))
                                        (list (token "*" 'NullInterpretation 32 0)
                                              (token "*v" 'SpineJoin 32 1)
                                              (token "*v" 'SpineJoin 32 2))
                                        (list (token "*v" 'SpineJoin 33 0)
                                              (token "*v" 'SpineJoin 33 1))
                                        (list (token "==" 'Measure 34 0))
                                        (list (token "*-" 'SpineTerminator 35 0)))
                                  0)
                    (global-spine KERN
                                  (list (list (token "**kern" EXCLUSIVE-INTERPRETATION 0 1))
                                        (list (token "*clefG2" 'Clef 1 1))
                                        (list (token "*k[]" 'KeySignature 2 1))
                                        (list (token "*a:" 'KeyLabel 3 1))
                                        (list (token "*M3/4" 'TimeSignature 4 1))
                                        (list (token "*" 'NullInterpretation 5 1))
                                        (list (token "*" 'NullInterpretation 6 2))
                                        (list (token "*" 'NullInterpretation 7 3))
                                        (list (token "*^" 'SpineSplit 8 4))
                                        (list (token "*" 'NullInterpretation 9 4)
                                              (token "*^" 'SpineSplit 9 5))
                                        (list (token "*" 'NullInterpretation 10 4)
                                              (token "*" 'NullInterpretation 10 5)
                                              (token "*^" 'SpineSplit 10 6))
                                        (list (token "*" 'NullInterpretation 11 4)
                                              (token "*" 'NullInterpretation 11 5)
                                              (token "*" 'NullInterpretation 11 6)
                                              (token "*" 'NullInterpretation 11 7))
                                        (list (token "*" 'NullInterpretation 12 4)
                                              (token "*" 'NullInterpretation 12 5)
                                              (token "*" 'NullInterpretation 12 6)
                                              (token "*" 'NullInterpretation 12 7))
                                        (list (token "*" 'NullInterpretation 13 4)
                                              (token "*" 'NullInterpretation 13 5)
                                              (token "*" 'NullInterpretation 13 6)
                                              (token "*" 'NullInterpretation 13 7))
                                        (list (token "4c" 'SpineData 14 4)
                                              (token "4c" 'SpineData 14 5)
                                              (token "4c" 'SpineData 14 6)
                                              (token "4c" 'SpineData 14 7))
                                        (list (token "4c" 'SpineData 15 4)
                                              (token "4c" 'SpineData 15 5)
                                              (token "4c" 'SpineData 15 6)
                                              (token "4c" 'SpineData 15 7))
                                        (list (token "4c" 'SpineData 16 4)
                                              (token "4c" 'SpineData 16 5)
                                              (token "4c" 'SpineData 16 6)
                                              (token "4c" 'SpineData 16 7))
                                        (list (token "=2" 'Measure 17 4)
                                              (token "=2" 'Measure 17 5)
                                              (token "=2" 'Measure 17 6)
                                              (token "=2" 'Measure 17 7))
                                        (list (token "4c" 'SpineData 18 4)
                                              (token "4c" 'SpineData 18 5)
                                              (token "4c" 'SpineData 18 6)
                                              (token "4c" 'SpineData 18 7))
                                        (list (token "4c" 'SpineData 19 4)
                                              (token "4c" 'SpineData 19 5)
                                              (token "4c" 'SpineData 19 6)
                                              (token "4c" 'SpineData 19 7))
                                        (list (token "4c" 'SpineData 20 4)
                                              (token "4c" 'SpineData 20 5)
                                              (token "4c" 'SpineData 20 6)
                                              (token "4c" 'SpineData 20 7))
                                        (list (token "=3" 'Measure 21 4)
                                              (token "=3" 'Measure 21 5)
                                              (token "=3" 'Measure 21 6)
                                              (token "=3" 'Measure 21 7))
                                        (list (token "4c" 'SpineData 22 4)
                                              (token "4c" 'SpineData 22 5)
                                              (token "4c" 'SpineData 22 6)
                                              (token "4c" 'SpineData 22 7))
                                        (list (token "4c" 'SpineData 23 4)
                                              (token "4c" 'SpineData 23 5)
                                              (token "4c" 'SpineData 23 6)
                                              (token "4c" 'SpineData 23 7))
                                        (list (token "4c" 'SpineData 24 4)
                                              (token "4c" 'SpineData 24 5)
                                              (token "4c" 'SpineData 24 6)
                                              (token "4c" 'SpineData 24 7))
                                        (list (token "*" 'NullInterpretation 25 4)
                                              (token "*" 'NullInterpretation 25 5)
                                              (token "*" 'NullInterpretation 25 6)
                                              (token "*" 'NullInterpretation 25 7))
                                        (list (token "*" 'NullInterpretation 26 4)
                                              (token "*" 'NullInterpretation 26 5)
                                              (token "*" 'NullInterpretation 26 6)
                                              (token "*" 'NullInterpretation 26 7))
                                        (list (token "*" 'NullInterpretation 27 4)
                                              (token "*" 'NullInterpretation 27 5)
                                              (token "*" 'NullInterpretation 27 6)
                                              (token "*" 'NullInterpretation 27 7))
                                        (list (token "*" 'NullInterpretation 28 4)
                                              (token "*" 'NullInterpretation 28 5)
                                              (token "*v" 'SpineJoin 28 6)
                                              (token "*v" 'SpineJoin 28 7))
                                        (list (token "*" 'NullInterpretation 29 4)
                                              (token "*v" 'SpineJoin 29 5)
                                              (token "*v" 'SpineJoin 29 6))
                                        (list (token "*v" 'SpineJoin 30 4)
                                              (token "*v" 'SpineJoin 30 5))
                                        (list (token "*" 'NullInterpretation 31 4))
                                        (list (token "*" 'NullInterpretation 32 3))
                                        (list (token "*" 'NullInterpretation 33 2))
                                        (list (token "==" 'Measure 34 1))
                                        (list (token "*-" 'SpineTerminator 35 1)))
                                  1)
                    (global-spine KERN
                                  (list (list (token "**kern" EXCLUSIVE-INTERPRETATION 0 2))
                                        (list (token "*clefG2" 'Clef 1 2))
                                        (list (token "*k[]" 'KeySignature 2 2))
                                        (list (token "*a:" 'KeyLabel 3 2))
                                        (list (token "*M3/4" 'TimeSignature 4 2))
                                        (list (token "*" 'NullInterpretation 5 2))
                                        (list (token "*" 'NullInterpretation 6 3))
                                        (list (token "*" 'NullInterpretation 7 4))
                                        (list (token "*" 'NullInterpretation 8 5))
                                        (list (token "*" 'NullInterpretation 9 6))
                                        (list (token "*" 'NullInterpretation 10 7))
                                        (list (token "*^" 'SpineSplit 11 8))
                                        (list (token "*" 'NullInterpretation 12 8)
                                              (token "*^" 'SpineSplit 12 9))
                                        (list (token "*" 'NullInterpretation 13 8)
                                              (token "*" 'NullInterpretation 13 9)
                                              (token "*^" 'SpineSplit 13 10))
                                        (list (token "4c" 'SpineData 14 8)
                                              (token "4c" 'SpineData 14 9)
                                              (token "4c" 'SpineData 14 10)
                                              (token "4c" 'SpineData 14 11))
                                        (list (token "4c" 'SpineData 15 8)
                                              (token "4c" 'SpineData 15 9)
                                              (token "4c" 'SpineData 15 10)
                                              (token "4c" 'SpineData 15 11))
                                        (list (token "4c" 'SpineData 16 8)
                                              (token "4c" 'SpineData 16 9)
                                              (token "4c" 'SpineData 16 10)
                                              (token "4c" 'SpineData 16 11))
                                        (list (token "=2" 'Measure 17 8)
                                              (token "=2" 'Measure 17 9)
                                              (token "=2" 'Measure 17 10)
                                              (token "=2" 'Measure 17 11))
                                        (list (token "4c" 'SpineData 18 8)
                                              (token "4c" 'SpineData 18 9)
                                              (token "4c" 'SpineData 18 10)
                                              (token "4c" 'SpineData 18 11))
                                        (list (token "4c" 'SpineData 19 8)
                                              (token "4c" 'SpineData 19 9)
                                              (token "4c" 'SpineData 19 10)
                                              (token "4c" 'SpineData 19 11))
                                        (list (token "4c" 'SpineData 20 8)
                                              (token "4c" 'SpineData 20 9)
                                              (token "4c" 'SpineData 20 10)
                                              (token "4c" 'SpineData 20 11))
                                        (list (token "=3" 'Measure 21 8)
                                              (token "=3" 'Measure 21 9)
                                              (token "=3" 'Measure 21 10)
                                              (token "=3" 'Measure 21 11))
                                        (list (token "4c" 'SpineData 22 8)
                                              (token "4c" 'SpineData 22 9)
                                              (token "4c" 'SpineData 22 10)
                                              (token "4c" 'SpineData 22 11))
                                        (list (token "4c" 'SpineData 23 8)
                                              (token "4c" 'SpineData 23 9)
                                              (token "4c" 'SpineData 23 10)
                                              (token "4c" 'SpineData 23 11))
                                        (list (token "4c" 'SpineData 24 8)
                                              (token "4c" 'SpineData 24 9)
                                              (token "4c" 'SpineData 24 10)
                                              (token "4c" 'SpineData 24 11))
                                        (list (token "*" 'NullInterpretation 25 8)
                                              (token "*" 'NullInterpretation 25 9)
                                              (token "*v" 'SpineJoin 25 10)
                                              (token "*v" 'SpineJoin 25 11))
                                        (list (token "*" 'NullInterpretation 26 8)
                                              (token "*v" 'SpineJoin 26 9)
                                              (token "*v" 'SpineJoin 26 10))
                                        (list (token "*v" 'SpineJoin 27 8)
                                              (token "*v" 'SpineJoin 27 9))
                                        (list (token "*" 'NullInterpretation 28 8))
                                        (list (token "*" 'NullInterpretation 29 7))
                                        (list (token "*" 'NullInterpretation 30 6))
                                        (list (token "*" 'NullInterpretation 31 5))
                                        (list (token "*" 'NullInterpretation 32 4))
                                        (list (token "*" 'NullInterpretation 33 3))
                                        (list (token "==" 'Measure 34 2))
                                        (list (token "*-" 'SpineTerminator 35 2)))
                                  2)))
(check-expect (hgraph->hfile (hgraph (root (list (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 0))
                                                       (leaf (token "*clefG2" 'Clef 1 0))
                                                       (leaf (token "*k[]" 'KeySignature 2 0))
                                                       (leaf (token "*a:" 'KeyLabel 3 0))
                                                       (leaf (token "*M3/4" 'TimeSignature 4 0))
                                                       (parent (token "*^" 'SpineSplit 5 0)
                                                               (list (leaf (token "*" 'NullInterpretation 6 0))
                                                                     (leaf (token "*" 'NullInterpretation 7 0))
                                                                     (leaf (token "*" 'NullInterpretation 8 0))
                                                                     (leaf (token "*" 'NullInterpretation 9 0))
                                                                     (leaf (token "*" 'NullInterpretation 10 0))
                                                                     (leaf (token "*" 'NullInterpretation 11 0))
                                                                     (leaf (token "*" 'NullInterpretation 12 0))
                                                                     (leaf (token "*" 'NullInterpretation 13 0))
                                                                     (leaf (token "4c" 'SpineData 14 0))
                                                                     (leaf (token "4c" 'SpineData 15 0))
                                                                     (leaf (token "4c" 'SpineData 16 0))
                                                                     (leaf (token "=2" 'Measure 17 0))
                                                                     (leaf (token "4c" 'SpineData 18 0))
                                                                     (leaf (token "4c" 'SpineData 19 0))
                                                                     (leaf (token "4c" 'SpineData 20 0))
                                                                     (leaf (token "=3" 'Measure 21 0))
                                                                     (leaf (token "4c" 'SpineData 22 0))
                                                                     (leaf (token "4c" 'SpineData 23 0))
                                                                     (leaf (token "4c" 'SpineData 24 0))
                                                                     (leaf (token "*" 'NullInterpretation 25 0))
                                                                     (leaf (token "*" 'NullInterpretation 26 0))
                                                                     (leaf (token "*" 'NullInterpretation 27 0))
                                                                     (leaf (token "*" 'NullInterpretation 28 0))
                                                                     (leaf (token "*" 'NullInterpretation 29 0))
                                                                     (leaf (token "*" 'NullInterpretation 30 0))
                                                                     (leaf (token "*" 'NullInterpretation 31 0))
                                                                     (leaf (token "*" 'NullInterpretation 32 0))
                                                                     (leaf (token "*v" 'SpineJoin 33 0)))
                                                               (list (parent (token "*^" 'SpineSplit 6 1)
                                                                             (list (leaf (token "*" 'NullInterpretation 7 1))
                                                                                   (leaf (token "*" 'NullInterpretation 8 1))
                                                                                   (leaf (token "*" 'NullInterpretation 9 1))
                                                                                   (leaf (token "*" 'NullInterpretation 10 1))
                                                                                   (leaf (token "*" 'NullInterpretation 11 1))
                                                                                   (leaf (token "*" 'NullInterpretation 12 1))
                                                                                   (leaf (token "*" 'NullInterpretation 13 1))
                                                                                   (leaf (token "4c" 'SpineData 14 1))
                                                                                   (leaf (token "4c" 'SpineData 15 1))
                                                                                   (leaf (token "4c" 'SpineData 16 1))
                                                                                   (leaf (token "=2" 'Measure 17 1))
                                                                                   (leaf (token "4c" 'SpineData 18 1))
                                                                                   (leaf (token "4c" 'SpineData 19 1))
                                                                                   (leaf (token "4c" 'SpineData 20 1))
                                                                                   (leaf (token "=3" 'Measure 21 1))
                                                                                   (leaf (token "4c" 'SpineData 22 1))
                                                                                   (leaf (token "4c" 'SpineData 23 1))
                                                                                   (leaf (token "4c" 'SpineData 24 1))
                                                                                   (leaf (token "*" 'NullInterpretation 25 1))
                                                                                   (leaf (token "*" 'NullInterpretation 26 1))
                                                                                   (leaf (token "*" 'NullInterpretation 27 1))
                                                                                   (leaf (token "*" 'NullInterpretation 28 1))
                                                                                   (leaf (token "*" 'NullInterpretation 29 1))
                                                                                   (leaf (token "*" 'NullInterpretation 30 1))
                                                                                   (leaf (token "*" 'NullInterpretation 31 1))
                                                                                   (leaf (token "*v" 'SpineJoin 32 1)))
                                                                             (list (parent (token "*^" 'SpineSplit 7 2)
                                                                                           (list (leaf (token "*" 'NullInterpretation 8 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 9 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 10 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 11 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 12 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 13 2))
                                                                                                 (leaf (token "4c" 'SpineData 14 2))
                                                                                                 (leaf (token "4c" 'SpineData 15 2))
                                                                                                 (leaf (token "4c" 'SpineData 16 2))
                                                                                                 (leaf (token "=2" 'Measure 17 2))
                                                                                                 (leaf (token "4c" 'SpineData 18 2))
                                                                                                 (leaf (token "4c" 'SpineData 19 2))
                                                                                                 (leaf (token "4c" 'SpineData 20 2))
                                                                                                 (leaf (token "=3" 'Measure 21 2))
                                                                                                 (leaf (token "4c" 'SpineData 22 2))
                                                                                                 (leaf (token "4c" 'SpineData 23 2))
                                                                                                 (leaf (token "4c" 'SpineData 24 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 25 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 26 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 27 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 28 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 29 2))
                                                                                                 (leaf (token "*" 'NullInterpretation 30 2))
                                                                                                 (leaf (token "*v" 'SpineJoin 31 2)))
                                                                                           (list (leaf (token "*" 'NullInterpretation 8 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 9 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 10 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 11 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 12 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 13 3))
                                                                                                 (leaf (token "4c" 'SpineData 14 3))
                                                                                                 (leaf (token "4c" 'SpineData 15 3))
                                                                                                 (leaf (token "4c" 'SpineData 16 3))
                                                                                                 (leaf (token "=2" 'Measure 17 3))
                                                                                                 (leaf (token "4c" 'SpineData 18 3))
                                                                                                 (leaf (token "4c" 'SpineData 19 3))
                                                                                                 (leaf (token "4c" 'SpineData 20 3))
                                                                                                 (leaf (token "=3" 'Measure 21 3))
                                                                                                 (leaf (token "4c" 'SpineData 22 3))
                                                                                                 (leaf (token "4c" 'SpineData 23 3))
                                                                                                 (leaf (token "4c" 'SpineData 24 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 25 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 26 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 27 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 28 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 29 3))
                                                                                                 (leaf (token "*" 'NullInterpretation 30 3))
                                                                                                 (leaf (token "*v" 'SpineJoin 31 3))))
                                                                                   (leaf (token "*v" 'SpineJoin 32 2))))
                                                                     (leaf (token "*v" 'SpineJoin 33 1))))
                                                       (leaf (token "==" 'Measure 34 0))
                                                       (leaf (token "*-" 'SpineTerminator 35 0)))
                                                 (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 1))
                                                       (leaf (token "*clefG2" 'Clef 1 1))
                                                       (leaf (token "*k[]" 'KeySignature 2 1))
                                                       (leaf (token "*a:" 'KeyLabel 3 1))
                                                       (leaf (token "*M3/4" 'TimeSignature 4 1))
                                                       (leaf (token "*" 'NullInterpretation 5 1))
                                                       (leaf (token "*" 'NullInterpretation 6 2))
                                                       (leaf (token "*" 'NullInterpretation 7 3))
                                                       (parent (token "*^" 'SpineSplit 8 4)
                                                               (list (leaf (token "*" 'NullInterpretation 9 4))
                                                                     (leaf (token "*" 'NullInterpretation 10 4))
                                                                     (leaf (token "*" 'NullInterpretation 11 4))
                                                                     (leaf (token "*" 'NullInterpretation 12 4))
                                                                     (leaf (token "*" 'NullInterpretation 13 4))
                                                                     (leaf (token "4c" 'SpineData 14 4))
                                                                     (leaf (token "4c" 'SpineData 15 4))
                                                                     (leaf (token "4c" 'SpineData 16 4))
                                                                     (leaf (token "=2" 'Measure 17 4))
                                                                     (leaf (token "4c" 'SpineData 18 4))
                                                                     (leaf (token "4c" 'SpineData 19 4))
                                                                     (leaf (token "4c" 'SpineData 20 4))
                                                                     (leaf (token "=3" 'Measure 21 4))
                                                                     (leaf (token "4c" 'SpineData 22 4))
                                                                     (leaf (token "4c" 'SpineData 23 4))
                                                                     (leaf (token "4c" 'SpineData 24 4))
                                                                     (leaf (token "*" 'NullInterpretation 25 4))
                                                                     (leaf (token "*" 'NullInterpretation 26 4))
                                                                     (leaf (token "*" 'NullInterpretation 27 4))
                                                                     (leaf (token "*" 'NullInterpretation 28 4))
                                                                     (leaf (token "*" 'NullInterpretation 29 4))
                                                                     (leaf (token "*v" 'SpineJoin 30 4)))
                                                               (list (parent (token "*^" 'SpineSplit 9 5)
                                                                             (list (leaf (token "*" 'NullInterpretation 10 5))
                                                                                   (leaf (token "*" 'NullInterpretation 11 5))
                                                                                   (leaf (token "*" 'NullInterpretation 12 5))
                                                                                   (leaf (token "*" 'NullInterpretation 13 5))
                                                                                   (leaf (token "4c" 'SpineData 14 5))
                                                                                   (leaf (token "4c" 'SpineData 15 5))
                                                                                   (leaf (token "4c" 'SpineData 16 5))
                                                                                   (leaf (token "=2" 'Measure 17 5))
                                                                                   (leaf (token "4c" 'SpineData 18 5))
                                                                                   (leaf (token "4c" 'SpineData 19 5))
                                                                                   (leaf (token "4c" 'SpineData 20 5))
                                                                                   (leaf (token "=3" 'Measure 21 5))
                                                                                   (leaf (token "4c" 'SpineData 22 5))
                                                                                   (leaf (token "4c" 'SpineData 23 5))
                                                                                   (leaf (token "4c" 'SpineData 24 5))
                                                                                   (leaf (token "*" 'NullInterpretation 25 5))
                                                                                   (leaf (token "*" 'NullInterpretation 26 5))
                                                                                   (leaf (token "*" 'NullInterpretation 27 5))
                                                                                   (leaf (token "*" 'NullInterpretation 28 5))
                                                                                   (leaf (token "*v" 'SpineJoin 29 5)))
                                                                             (list (parent (token "*^" 'SpineSplit 10 6)
                                                                                           (list (leaf (token "*" 'NullInterpretation 11 6))
                                                                                                 (leaf (token "*" 'NullInterpretation 12 6))
                                                                                                 (leaf (token "*" 'NullInterpretation 13 6))
                                                                                                 (leaf (token "4c" 'SpineData 14 6))
                                                                                                 (leaf (token "4c" 'SpineData 15 6))
                                                                                                 (leaf (token "4c" 'SpineData 16 6))
                                                                                                 (leaf (token "=2" 'Measure 17 6))
                                                                                                 (leaf (token "4c" 'SpineData 18 6))
                                                                                                 (leaf (token "4c" 'SpineData 19 6))
                                                                                                 (leaf (token "4c" 'SpineData 20 6))
                                                                                                 (leaf (token "=3" 'Measure 21 6))
                                                                                                 (leaf (token "4c" 'SpineData 22 6))
                                                                                                 (leaf (token "4c" 'SpineData 23 6))
                                                                                                 (leaf (token "4c" 'SpineData 24 6))
                                                                                                 (leaf (token "*" 'NullInterpretation 25 6))
                                                                                                 (leaf (token "*" 'NullInterpretation 26 6))
                                                                                                 (leaf (token "*" 'NullInterpretation 27 6))
                                                                                                 (leaf (token "*v" 'SpineJoin 28 6)))
                                                                                           (list (leaf (token "*" 'NullInterpretation 11 7))
                                                                                                 (leaf (token "*" 'NullInterpretation 12 7))
                                                                                                 (leaf (token "*" 'NullInterpretation 13 7))
                                                                                                 (leaf (token "4c" 'SpineData 14 7))
                                                                                                 (leaf (token "4c" 'SpineData 15 7))
                                                                                                 (leaf (token "4c" 'SpineData 16 7))
                                                                                                 (leaf (token "=2" 'Measure 17 7))
                                                                                                 (leaf (token "4c" 'SpineData 18 7))
                                                                                                 (leaf (token "4c" 'SpineData 19 7))
                                                                                                 (leaf (token "4c" 'SpineData 20 7))
                                                                                                 (leaf (token "=3" 'Measure 21 7))
                                                                                                 (leaf (token "4c" 'SpineData 22 7))
                                                                                                 (leaf (token "4c" 'SpineData 23 7))
                                                                                                 (leaf (token "4c" 'SpineData 24 7))
                                                                                                 (leaf (token "*" 'NullInterpretation 25 7))
                                                                                                 (leaf (token "*" 'NullInterpretation 26 7))
                                                                                                 (leaf (token "*" 'NullInterpretation 27 7))
                                                                                                 (leaf (token "*v" 'SpineJoin 28 7))))
                                                                                   (leaf (token "*v" 'SpineJoin 29 6))))
                                                                     (leaf (token "*v" 'SpineJoin 30 5))))
                                                       (leaf (token "*" 'NullInterpretation 31 4))
                                                       (leaf (token "*" 'NullInterpretation 32 3))
                                                       (leaf (token "*" 'NullInterpretation 33 2))
                                                       (leaf (token "==" 'Measure 34 1))
                                                       (leaf (token "*-" 'SpineTerminator 35 1)))
                                                 (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 2))
                                                       (leaf (token "*clefG2" 'Clef 1 2))
                                                       (leaf (token "*k[]" 'KeySignature 2 2))
                                                       (leaf (token "*a:" 'KeyLabel 3 2))
                                                       (leaf (token "*M3/4" 'TimeSignature 4 2))
                                                       (leaf (token "*" 'NullInterpretation 5 2))
                                                       (leaf (token "*" 'NullInterpretation 6 3))
                                                       (leaf (token "*" 'NullInterpretation 7 4))
                                                       (leaf (token "*" 'NullInterpretation 8 5))
                                                       (leaf (token "*" 'NullInterpretation 9 6))
                                                       (leaf (token "*" 'NullInterpretation 10 7))
                                                       (parent (token "*^" 'SpineSplit 11 8)
                                                               (list (leaf (token "*" 'NullInterpretation 12 8))
                                                                     (leaf (token "*" 'NullInterpretation 13 8))
                                                                     (leaf (token "4c" 'SpineData 14 8))
                                                                     (leaf (token "4c" 'SpineData 15 8))
                                                                     (leaf (token "4c" 'SpineData 16 8))
                                                                     (leaf (token "=2" 'Measure 17 8))
                                                                     (leaf (token "4c" 'SpineData 18 8))
                                                                     (leaf (token "4c" 'SpineData 19 8))
                                                                     (leaf (token "4c" 'SpineData 20 8))
                                                                     (leaf (token "=3" 'Measure 21 8))
                                                                     (leaf (token "4c" 'SpineData 22 8))
                                                                     (leaf (token "4c" 'SpineData 23 8))
                                                                     (leaf (token "4c" 'SpineData 24 8))
                                                                     (leaf (token "*" 'NullInterpretation 25 8))
                                                                     (leaf (token "*" 'NullInterpretation 26 8))
                                                                     (leaf (token "*v" 'SpineJoin 27 8)))
                                                               (list (parent (token "*^" 'SpineSplit 12 9)
                                                                             (list (leaf (token "*" 'NullInterpretation 13 9))
                                                                                   (leaf (token "4c" 'SpineData 14 9))
                                                                                   (leaf (token "4c" 'SpineData 15 9))
                                                                                   (leaf (token "4c" 'SpineData 16 9))
                                                                                   (leaf (token "=2" 'Measure 17 9))
                                                                                   (leaf (token "4c" 'SpineData 18 9))
                                                                                   (leaf (token "4c" 'SpineData 19 9))
                                                                                   (leaf (token "4c" 'SpineData 20 9))
                                                                                   (leaf (token "=3" 'Measure 21 9))
                                                                                   (leaf (token "4c" 'SpineData 22 9))
                                                                                   (leaf (token "4c" 'SpineData 23 9))
                                                                                   (leaf (token "4c" 'SpineData 24 9))
                                                                                   (leaf (token "*" 'NullInterpretation 25 9))
                                                                                   (leaf (token "*v" 'SpineJoin 26 9)))
                                                                             (list (parent (token "*^" 'SpineSplit 13 10)
                                                                                           (list (leaf (token "4c" 'SpineData 14 10))
                                                                                                 (leaf (token "4c" 'SpineData 15 10))
                                                                                                 (leaf (token "4c" 'SpineData 16 10))
                                                                                                 (leaf (token "=2" 'Measure 17 10))
                                                                                                 (leaf (token "4c" 'SpineData 18 10))
                                                                                                 (leaf (token "4c" 'SpineData 19 10))
                                                                                                 (leaf (token "4c" 'SpineData 20 10))
                                                                                                 (leaf (token "=3" 'Measure 21 10))
                                                                                                 (leaf (token "4c" 'SpineData 22 10))
                                                                                                 (leaf (token "4c" 'SpineData 23 10))
                                                                                                 (leaf (token "4c" 'SpineData 24 10))
                                                                                                 (leaf (token "*v" 'SpineJoin 25 10)))
                                                                                           (list (leaf (token "4c" 'SpineData 14 11))
                                                                                                 (leaf (token "4c" 'SpineData 15 11))
                                                                                                 (leaf (token "4c" 'SpineData 16 11))
                                                                                                 (leaf (token "=2" 'Measure 17 11))
                                                                                                 (leaf (token "4c" 'SpineData 18 11))
                                                                                                 (leaf (token "4c" 'SpineData 19 11))
                                                                                                 (leaf (token "4c" 'SpineData 20 11))
                                                                                                 (leaf (token "=3" 'Measure 21 11))
                                                                                                 (leaf (token "4c" 'SpineData 22 11))
                                                                                                 (leaf (token "4c" 'SpineData 23 11))
                                                                                                 (leaf (token "4c" 'SpineData 24 11))
                                                                                                 (leaf (token "*v" 'SpineJoin 25 11))))
                                                                                   (leaf (token "*v" 'SpineJoin 26 10))))
                                                                     (leaf (token "*v" 'SpineJoin 27 9))))
                                                       (leaf (token "*" 'NullInterpretation 28 8))
                                                       (leaf (token "*" 'NullInterpretation 29 7))
                                                       (leaf (token "*" 'NullInterpretation 30 6))
                                                       (leaf (token "*" 'NullInterpretation 31 5))
                                                       (leaf (token "*" 'NullInterpretation 32 4))
                                                       (leaf (token "*" 'NullInterpretation 33 3))
                                                       (leaf (token "==" 'Measure 34 2))
                                                       (leaf (token "*-" 'SpineTerminator 35 2)))))))
              (path->hfile "../../data/count/three-spines-three-splits.krn"))
(check-expect (tokens->records (list (list (token "**kern" EXCLUSIVE-INTERPRETATION 0 0)
                                      (token "**kern" EXCLUSIVE-INTERPRETATION 0 1)
                                      (token "**kern" EXCLUSIVE-INTERPRETATION 0 2))
                                (list (token "*clefG2" 'Clef 1 0)
                                      (token "*clefG2" 'Clef 1 1)
                                      (token "*clefG2" 'Clef 1 2))
                                (list (token "*k[]" 'KeySignature 2 0)
                                      (token "*k[]" 'KeySignature 2 1)
                                      (token "*k[]" 'KeySignature 2 2))
                                (list (token "*a:" 'KeyLabel 3 0)
                                      (token "*a:" 'KeyLabel 3 1)
                                      (token "*a:" 'KeyLabel 3 2))
                                (list (token "*M3/4" 'TimeSignature 4 0)
                                      (token "*M3/4" 'TimeSignature 4 1)
                                      (token "*M3/4" 'TimeSignature 4 2))
                                (list (token "*^" 'SpineSplit 5 0)
                                      (token "*" 'NullInterpretation 5 1)
                                      (token "*" 'NullInterpretation 5 2))
                                (list (token "*" 'NullInterpretation 6 0)
                                      (token "*^" 'SpineSplit 6 1)
                                      (token "*" 'NullInterpretation 6 2)
                                      (token "*" 'NullInterpretation 6 3))
                                (list (token "*" 'NullInterpretation 7 0)
                                      (token "*" 'NullInterpretation 7 1)
                                      (token "*^" 'SpineSplit 7 2)
                                      (token "*" 'NullInterpretation 7 3)
                                      (token "*" 'NullInterpretation 7 4))
                                (list (token "*" 'NullInterpretation 8 0)
                                      (token "*" 'NullInterpretation 8 1)
                                      (token "*" 'NullInterpretation 8 2)
                                      (token "*" 'NullInterpretation 8 3)
                                      (token "*^" 'SpineSplit 8 4)
                                      (token "*" 'NullInterpretation 8 5))
                                (list (token "*" 'NullInterpretation 9 0)
                                      (token "*" 'NullInterpretation 9 1)
                                      (token "*" 'NullInterpretation 9 2)
                                      (token "*" 'NullInterpretation 9 3)
                                      (token "*" 'NullInterpretation 9 4)
                                      (token "*^" 'SpineSplit 9 5)
                                      (token "*" 'NullInterpretation 9 6))
                                (list (token "*" 'NullInterpretation 10 0)
                                      (token "*" 'NullInterpretation 10 1)
                                      (token "*" 'NullInterpretation 10 2)
                                      (token "*" 'NullInterpretation 10 3)
                                      (token "*" 'NullInterpretation 10 4)
                                      (token "*" 'NullInterpretation 10 5)
                                      (token "*^" 'SpineSplit 10 6)
                                      (token "*" 'NullInterpretation 10 7))
                                (list (token "*" 'NullInterpretation 11 0)
                                      (token "*" 'NullInterpretation 11 1)
                                      (token "*" 'NullInterpretation 11 2)
                                      (token "*" 'NullInterpretation 11 3)
                                      (token "*" 'NullInterpretation 11 4)
                                      (token "*" 'NullInterpretation 11 5)
                                      (token "*" 'NullInterpretation 11 6)
                                      (token "*" 'NullInterpretation 11 7)
                                      (token "*^" 'SpineSplit 11 8))
                                (list (token "*" 'NullInterpretation 12 0)
                                      (token "*" 'NullInterpretation 12 1)
                                      (token "*" 'NullInterpretation 12 2)
                                      (token "*" 'NullInterpretation 12 3)
                                      (token "*" 'NullInterpretation 12 4)
                                      (token "*" 'NullInterpretation 12 5)
                                      (token "*" 'NullInterpretation 12 6)
                                      (token "*" 'NullInterpretation 12 7)
                                      (token "*" 'NullInterpretation 12 8)
                                      (token "*^" 'SpineSplit 12 9))
                                (list (token "*" 'NullInterpretation 13 0)
                                      (token "*" 'NullInterpretation 13 1)
                                      (token "*" 'NullInterpretation 13 2)
                                      (token "*" 'NullInterpretation 13 3)
                                      (token "*" 'NullInterpretation 13 4)
                                      (token "*" 'NullInterpretation 13 5)
                                      (token "*" 'NullInterpretation 13 6)
                                      (token "*" 'NullInterpretation 13 7)
                                      (token "*" 'NullInterpretation 13 8)
                                      (token "*" 'NullInterpretation 13 9)
                                      (token "*^" 'SpineSplit 13 10))
                                (list (token "4c" 'SpineData 14 0)
                                      (token "4c" 'SpineData 14 1)
                                      (token "4c" 'SpineData 14 2)
                                      (token "4c" 'SpineData 14 3)
                                      (token "4c" 'SpineData 14 4)
                                      (token "4c" 'SpineData 14 5)
                                      (token "4c" 'SpineData 14 6)
                                      (token "4c" 'SpineData 14 7)
                                      (token "4c" 'SpineData 14 8)
                                      (token "4c" 'SpineData 14 9)
                                      (token "4c" 'SpineData 14 10)
                                      (token "4c" 'SpineData 14 11))
                                (list (token "4c" 'SpineData 15 0)
                                      (token "4c" 'SpineData 15 1)
                                      (token "4c" 'SpineData 15 2)
                                      (token "4c" 'SpineData 15 3)
                                      (token "4c" 'SpineData 15 4)
                                      (token "4c" 'SpineData 15 5)
                                      (token "4c" 'SpineData 15 6)
                                      (token "4c" 'SpineData 15 7)
                                      (token "4c" 'SpineData 15 8)
                                      (token "4c" 'SpineData 15 9)
                                      (token "4c" 'SpineData 15 10)
                                      (token "4c" 'SpineData 15 11))
                                (list (token "4c" 'SpineData 16 0)
                                      (token "4c" 'SpineData 16 1)
                                      (token "4c" 'SpineData 16 2)
                                      (token "4c" 'SpineData 16 3)
                                      (token "4c" 'SpineData 16 4)
                                      (token "4c" 'SpineData 16 5)
                                      (token "4c" 'SpineData 16 6)
                                      (token "4c" 'SpineData 16 7)
                                      (token "4c" 'SpineData 16 8)
                                      (token "4c" 'SpineData 16 9)
                                      (token "4c" 'SpineData 16 10)
                                      (token "4c" 'SpineData 16 11))
                                (list (token "=2" 'Measure 17 0)
                                      (token "=2" 'Measure 17 1)
                                      (token "=2" 'Measure 17 2)
                                      (token "=2" 'Measure 17 3)
                                      (token "=2" 'Measure 17 4)
                                      (token "=2" 'Measure 17 5)
                                      (token "=2" 'Measure 17 6)
                                      (token "=2" 'Measure 17 7)
                                      (token "=2" 'Measure 17 8)
                                      (token "=2" 'Measure 17 9)
                                      (token "=2" 'Measure 17 10)
                                      (token "=2" 'Measure 17 11))
                                (list (token "4c" 'SpineData 18 0)
                                      (token "4c" 'SpineData 18 1)
                                      (token "4c" 'SpineData 18 2)
                                      (token "4c" 'SpineData 18 3)
                                      (token "4c" 'SpineData 18 4)
                                      (token "4c" 'SpineData 18 5)
                                      (token "4c" 'SpineData 18 6)
                                      (token "4c" 'SpineData 18 7)
                                      (token "4c" 'SpineData 18 8)
                                      (token "4c" 'SpineData 18 9)
                                      (token "4c" 'SpineData 18 10)
                                      (token "4c" 'SpineData 18 11))
                                (list (token "4c" 'SpineData 19 0)
                                      (token "4c" 'SpineData 19 1)
                                      (token "4c" 'SpineData 19 2)
                                      (token "4c" 'SpineData 19 3)
                                      (token "4c" 'SpineData 19 4)
                                      (token "4c" 'SpineData 19 5)
                                      (token "4c" 'SpineData 19 6)
                                      (token "4c" 'SpineData 19 7)
                                      (token "4c" 'SpineData 19 8)
                                      (token "4c" 'SpineData 19 9)
                                      (token "4c" 'SpineData 19 10)
                                      (token "4c" 'SpineData 19 11))
                                (list (token "4c" 'SpineData 20 0)
                                      (token "4c" 'SpineData 20 1)
                                      (token "4c" 'SpineData 20 2)
                                      (token "4c" 'SpineData 20 3)
                                      (token "4c" 'SpineData 20 4)
                                      (token "4c" 'SpineData 20 5)
                                      (token "4c" 'SpineData 20 6)
                                      (token "4c" 'SpineData 20 7)
                                      (token "4c" 'SpineData 20 8)
                                      (token "4c" 'SpineData 20 9)
                                      (token "4c" 'SpineData 20 10)
                                      (token "4c" 'SpineData 20 11))
                                (list (token "=3" 'Measure 21 0)
                                      (token "=3" 'Measure 21 1)
                                      (token "=3" 'Measure 21 2)
                                      (token "=3" 'Measure 21 3)
                                      (token "=3" 'Measure 21 4)
                                      (token "=3" 'Measure 21 5)
                                      (token "=3" 'Measure 21 6)
                                      (token "=3" 'Measure 21 7)
                                      (token "=3" 'Measure 21 8)
                                      (token "=3" 'Measure 21 9)
                                      (token "=3" 'Measure 21 10)
                                      (token "=3" 'Measure 21 11))
                                (list (token "4c" 'SpineData 22 0)
                                      (token "4c" 'SpineData 22 1)
                                      (token "4c" 'SpineData 22 2)
                                      (token "4c" 'SpineData 22 3)
                                      (token "4c" 'SpineData 22 4)
                                      (token "4c" 'SpineData 22 5)
                                      (token "4c" 'SpineData 22 6)
                                      (token "4c" 'SpineData 22 7)
                                      (token "4c" 'SpineData 22 8)
                                      (token "4c" 'SpineData 22 9)
                                      (token "4c" 'SpineData 22 10)
                                      (token "4c" 'SpineData 22 11))
                                (list (token "4c" 'SpineData 23 0)
                                      (token "4c" 'SpineData 23 1)
                                      (token "4c" 'SpineData 23 2)
                                      (token "4c" 'SpineData 23 3)
                                      (token "4c" 'SpineData 23 4)
                                      (token "4c" 'SpineData 23 5)
                                      (token "4c" 'SpineData 23 6)
                                      (token "4c" 'SpineData 23 7)
                                      (token "4c" 'SpineData 23 8)
                                      (token "4c" 'SpineData 23 9)
                                      (token "4c" 'SpineData 23 10)
                                      (token "4c" 'SpineData 23 11))
                                (list (token "4c" 'SpineData 24 0)
                                      (token "4c" 'SpineData 24 1)
                                      (token "4c" 'SpineData 24 2)
                                      (token "4c" 'SpineData 24 3)
                                      (token "4c" 'SpineData 24 4)
                                      (token "4c" 'SpineData 24 5)
                                      (token "4c" 'SpineData 24 6)
                                      (token "4c" 'SpineData 24 7)
                                      (token "4c" 'SpineData 24 8)
                                      (token "4c" 'SpineData 24 9)
                                      (token "4c" 'SpineData 24 10)
                                      (token "4c" 'SpineData 24 11))
                                (list (token "*" 'NullInterpretation 25 0)
                                      (token "*" 'NullInterpretation 25 1)
                                      (token "*" 'NullInterpretation 25 2)
                                      (token "*" 'NullInterpretation 25 3)
                                      (token "*" 'NullInterpretation 25 4)
                                      (token "*" 'NullInterpretation 25 5)
                                      (token "*" 'NullInterpretation 25 6)
                                      (token "*" 'NullInterpretation 25 7)
                                      (token "*" 'NullInterpretation 25 8)
                                      (token "*" 'NullInterpretation 25 9)
                                      (token "*v" 'SpineJoin 25 10)
                                      (token "*v" 'SpineJoin 25 11))
                                (list (token "*" 'NullInterpretation 26 0)
                                      (token "*" 'NullInterpretation 26 1)
                                      (token "*" 'NullInterpretation 26 2)
                                      (token "*" 'NullInterpretation 26 3)
                                      (token "*" 'NullInterpretation 26 4)
                                      (token "*" 'NullInterpretation 26 5)
                                      (token "*" 'NullInterpretation 26 6)
                                      (token "*" 'NullInterpretation 26 7)
                                      (token "*" 'NullInterpretation 26 8)
                                      (token "*v" 'SpineJoin 26 9)
                                      (token "*v" 'SpineJoin 26 10))
                                (list (token "*" 'NullInterpretation 27 0)
                                      (token "*" 'NullInterpretation 27 1)
                                      (token "*" 'NullInterpretation 27 2)
                                      (token "*" 'NullInterpretation 27 3)
                                      (token "*" 'NullInterpretation 27 4)
                                      (token "*" 'NullInterpretation 27 5)
                                      (token "*" 'NullInterpretation 27 6)
                                      (token "*" 'NullInterpretation 27 7)
                                      (token "*v" 'SpineJoin 27 8)
                                      (token "*v" 'SpineJoin 27 9))
                                (list (token "*" 'NullInterpretation 28 0)
                                      (token "*" 'NullInterpretation 28 1)
                                      (token "*" 'NullInterpretation 28 2)
                                      (token "*" 'NullInterpretation 28 3)
                                      (token "*" 'NullInterpretation 28 4)
                                      (token "*" 'NullInterpretation 28 5)
                                      (token "*v" 'SpineJoin 28 6)
                                      (token "*v" 'SpineJoin 28 7)
                                      (token "*" 'NullInterpretation 28 8))
                                (list (token "*" 'NullInterpretation 29 0)
                                      (token "*" 'NullInterpretation 29 1)
                                      (token "*" 'NullInterpretation 29 2)
                                      (token "*" 'NullInterpretation 29 3)
                                      (token "*" 'NullInterpretation 29 4)
                                      (token "*v" 'SpineJoin 29 5)
                                      (token "*v" 'SpineJoin 29 6)
                                      (token "*" 'NullInterpretation 29 7))
                                (list (token "*" 'NullInterpretation 30 0)
                                      (token "*" 'NullInterpretation 30 1)
                                      (token "*" 'NullInterpretation 30 2)
                                      (token "*" 'NullInterpretation 30 3)
                                      (token "*v" 'SpineJoin 30 4)
                                      (token "*v" 'SpineJoin 30 5)
                                      (token "*" 'NullInterpretation 30 6))
                                (list (token "*" 'NullInterpretation 31 0)
                                      (token "*" 'NullInterpretation 31 1)
                                      (token "*v" 'SpineJoin 31 2)
                                      (token "*v" 'SpineJoin 31 3)
                                      (token "*" 'NullInterpretation 31 4)
                                      (token "*" 'NullInterpretation 31 5))
                                (list (token "*" 'NullInterpretation 32 0)
                                      (token "*v" 'SpineJoin 32 1)
                                      (token "*v" 'SpineJoin 32 2)
                                      (token "*" 'NullInterpretation 32 3)
                                      (token "*" 'NullInterpretation 32 4))
                                (list (token "*v" 'SpineJoin 33 0)
                                      (token "*v" 'SpineJoin 33 1)
                                      (token "*" 'NullInterpretation 33 2)
                                      (token "*" 'NullInterpretation 33 3))
                                (list (token "==" 'Measure 34 0)
                                      (token "==" 'Measure 34 1)
                                      (token "==" 'Measure 34 2))
                                (list (token "*-" 'SpineTerminator 35 0)
                                      (token "*-" 'SpineTerminator 35 1)
                                      (token "*-" 'SpineTerminator 35 2))))
              (list (record "**kern\t**kern\t**kern" TOKEN
                            (list (token "**kern" EXCLUSIVE-INTERPRETATION 0 0)
                                  (token "**kern" EXCLUSIVE-INTERPRETATION 0 1)
                                  (token "**kern" EXCLUSIVE-INTERPRETATION 0 2))
                            0)
                    (record "*clefG2\t*clefG2\t*clefG2" TOKEN
                            (list (token "*clefG2" 'Clef 1 0)
                                  (token "*clefG2" 'Clef 1 1)
                                  (token "*clefG2" 'Clef 1 2))
                            1)
                    (record "*k[]\t*k[]\t*k[]" TOKEN
                            (list (token "*k[]" 'KeySignature 2 0)
                                  (token "*k[]" 'KeySignature 2 1)
                                  (token "*k[]" 'KeySignature 2 2))
                            2)
                    (record "*a:\t*a:\t*a:" TOKEN
                            (list (token "*a:" 'KeyLabel 3 0)
                                  (token "*a:" 'KeyLabel 3 1)
                                  (token "*a:" 'KeyLabel 3 2))
                            3)
                    (record "*M3/4\t*M3/4\t*M3/4" TOKEN
                            (list (token "*M3/4" 'TimeSignature 4 0)
                                  (token "*M3/4" 'TimeSignature 4 1)
                                  (token "*M3/4" 'TimeSignature 4 2))
                            4)
                    (record "*^\t*\t*" TOKEN
                            (list (token "*^" 'SpineSplit 5 0)
                                  (token "*" 'NullInterpretation 5 1)
                                  (token "*" 'NullInterpretation 5 2))
                            5)
                    (record "*\t*^\t*\t*" TOKEN
                            (list (token "*" 'NullInterpretation 6 0)
                                  (token "*^" 'SpineSplit 6 1)
                                  (token "*" 'NullInterpretation 6 2)
                                  (token "*" 'NullInterpretation 6 3))
                            6)
                    (record "*\t*\t*^\t*\t*" TOKEN
                            (list (token "*" 'NullInterpretation 7 0)
                                  (token "*" 'NullInterpretation 7 1)
                                  (token "*^" 'SpineSplit 7 2)
                                  (token "*" 'NullInterpretation 7 3)
                                  (token "*" 'NullInterpretation 7 4))
                            7)
                    (record "*\t*\t*\t*\t*^\t*" TOKEN
                            (list (token "*" 'NullInterpretation 8 0)
                                  (token "*" 'NullInterpretation 8 1)
                                  (token "*" 'NullInterpretation 8 2)
                                  (token "*" 'NullInterpretation 8 3)
                                  (token "*^" 'SpineSplit 8 4)
                                  (token "*" 'NullInterpretation 8 5))
                            8)
                    (record "*\t*\t*\t*\t*\t*^\t*" TOKEN
                            (list (token "*" 'NullInterpretation 9 0)
                                  (token "*" 'NullInterpretation 9 1)
                                  (token "*" 'NullInterpretation 9 2)
                                  (token "*" 'NullInterpretation 9 3)
                                  (token "*" 'NullInterpretation 9 4)
                                  (token "*^" 'SpineSplit 9 5)
                                  (token "*" 'NullInterpretation 9 6))
                            9)
                    (record "*\t*\t*\t*\t*\t*\t*^\t*" TOKEN
                            (list (token "*" 'NullInterpretation 10 0)
                                  (token "*" 'NullInterpretation 10 1)
                                  (token "*" 'NullInterpretation 10 2)
                                  (token "*" 'NullInterpretation 10 3)
                                  (token "*" 'NullInterpretation 10 4)
                                  (token "*" 'NullInterpretation 10 5)
                                  (token "*^" 'SpineSplit 10 6)
                                  (token "*" 'NullInterpretation 10 7))
                            10)
                    (record "*\t*\t*\t*\t*\t*\t*\t*\t*^" TOKEN
                            (list (token "*" 'NullInterpretation 11 0)
                                  (token "*" 'NullInterpretation 11 1)
                                  (token "*" 'NullInterpretation 11 2)
                                  (token "*" 'NullInterpretation 11 3)
                                  (token "*" 'NullInterpretation 11 4)
                                  (token "*" 'NullInterpretation 11 5)
                                  (token "*" 'NullInterpretation 11 6)
                                  (token "*" 'NullInterpretation 11 7)
                                  (token "*^" 'SpineSplit 11 8))
                            11)
                    (record "*\t*\t*\t*\t*\t*\t*\t*\t*\t*^" TOKEN
                            (list (token "*" 'NullInterpretation 12 0)
                                  (token "*" 'NullInterpretation 12 1)
                                  (token "*" 'NullInterpretation 12 2)
                                  (token "*" 'NullInterpretation 12 3)
                                  (token "*" 'NullInterpretation 12 4)
                                  (token "*" 'NullInterpretation 12 5)
                                  (token "*" 'NullInterpretation 12 6)
                                  (token "*" 'NullInterpretation 12 7)
                                  (token "*" 'NullInterpretation 12 8)
                                  (token "*^" 'SpineSplit 12 9))
                            12)
                    (record "*\t*\t*\t*\t*\t*\t*\t*\t*\t*\t*^" TOKEN
                            (list (token "*" 'NullInterpretation 13 0)
                                  (token "*" 'NullInterpretation 13 1)
                                  (token "*" 'NullInterpretation 13 2)
                                  (token "*" 'NullInterpretation 13 3)
                                  (token "*" 'NullInterpretation 13 4)
                                  (token "*" 'NullInterpretation 13 5)
                                  (token "*" 'NullInterpretation 13 6)
                                  (token "*" 'NullInterpretation 13 7)
                                  (token "*" 'NullInterpretation 13 8)
                                  (token "*" 'NullInterpretation 13 9)
                                  (token "*^" 'SpineSplit 13 10))
                            13)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 14 0)
                                  (token "4c" 'SpineData 14 1)
                                  (token "4c" 'SpineData 14 2)
                                  (token "4c" 'SpineData 14 3)
                                  (token "4c" 'SpineData 14 4)
                                  (token "4c" 'SpineData 14 5)
                                  (token "4c" 'SpineData 14 6)
                                  (token "4c" 'SpineData 14 7)
                                  (token "4c" 'SpineData 14 8)
                                  (token "4c" 'SpineData 14 9)
                                  (token "4c" 'SpineData 14 10)
                                  (token "4c" 'SpineData 14 11))
                            14)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 15 0)
                                  (token "4c" 'SpineData 15 1)
                                  (token "4c" 'SpineData 15 2)
                                  (token "4c" 'SpineData 15 3)
                                  (token "4c" 'SpineData 15 4)
                                  (token "4c" 'SpineData 15 5)
                                  (token "4c" 'SpineData 15 6)
                                  (token "4c" 'SpineData 15 7)
                                  (token "4c" 'SpineData 15 8)
                                  (token "4c" 'SpineData 15 9)
                                  (token "4c" 'SpineData 15 10)
                                  (token "4c" 'SpineData 15 11))
                            15)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 16 0)
                                  (token "4c" 'SpineData 16 1)
                                  (token "4c" 'SpineData 16 2)
                                  (token "4c" 'SpineData 16 3)
                                  (token "4c" 'SpineData 16 4)
                                  (token "4c" 'SpineData 16 5)
                                  (token "4c" 'SpineData 16 6)
                                  (token "4c" 'SpineData 16 7)
                                  (token "4c" 'SpineData 16 8)
                                  (token "4c" 'SpineData 16 9)
                                  (token "4c" 'SpineData 16 10)
                                  (token "4c" 'SpineData 16 11))
                            16)
                    (record "=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2\t=2" TOKEN
                            (list (token "=2" 'Measure 17 0)
                                  (token "=2" 'Measure 17 1)
                                  (token "=2" 'Measure 17 2)
                                  (token "=2" 'Measure 17 3)
                                  (token "=2" 'Measure 17 4)
                                  (token "=2" 'Measure 17 5)
                                  (token "=2" 'Measure 17 6)
                                  (token "=2" 'Measure 17 7)
                                  (token "=2" 'Measure 17 8)
                                  (token "=2" 'Measure 17 9)
                                  (token "=2" 'Measure 17 10)
                                  (token "=2" 'Measure 17 11))
                            17)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 18 0)
                                  (token "4c" 'SpineData 18 1)
                                  (token "4c" 'SpineData 18 2)
                                  (token "4c" 'SpineData 18 3)
                                  (token "4c" 'SpineData 18 4)
                                  (token "4c" 'SpineData 18 5)
                                  (token "4c" 'SpineData 18 6)
                                  (token "4c" 'SpineData 18 7)
                                  (token "4c" 'SpineData 18 8)
                                  (token "4c" 'SpineData 18 9)
                                  (token "4c" 'SpineData 18 10)
                                  (token "4c" 'SpineData 18 11))
                            18)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 19 0)
                                  (token "4c" 'SpineData 19 1)
                                  (token "4c" 'SpineData 19 2)
                                  (token "4c" 'SpineData 19 3)
                                  (token "4c" 'SpineData 19 4)
                                  (token "4c" 'SpineData 19 5)
                                  (token "4c" 'SpineData 19 6)
                                  (token "4c" 'SpineData 19 7)
                                  (token "4c" 'SpineData 19 8)
                                  (token "4c" 'SpineData 19 9)
                                  (token "4c" 'SpineData 19 10)
                                  (token "4c" 'SpineData 19 11))
                            19)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 20 0)
                                  (token "4c" 'SpineData 20 1)
                                  (token "4c" 'SpineData 20 2)
                                  (token "4c" 'SpineData 20 3)
                                  (token "4c" 'SpineData 20 4)
                                  (token "4c" 'SpineData 20 5)
                                  (token "4c" 'SpineData 20 6)
                                  (token "4c" 'SpineData 20 7)
                                  (token "4c" 'SpineData 20 8)
                                  (token "4c" 'SpineData 20 9)
                                  (token "4c" 'SpineData 20 10)
                                  (token "4c" 'SpineData 20 11))
                            20)
                    (record "=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3\t=3" TOKEN
                            (list (token "=3" 'Measure 21 0)
                                  (token "=3" 'Measure 21 1)
                                  (token "=3" 'Measure 21 2)
                                  (token "=3" 'Measure 21 3)
                                  (token "=3" 'Measure 21 4)
                                  (token "=3" 'Measure 21 5)
                                  (token "=3" 'Measure 21 6)
                                  (token "=3" 'Measure 21 7)
                                  (token "=3" 'Measure 21 8)
                                  (token "=3" 'Measure 21 9)
                                  (token "=3" 'Measure 21 10)
                                  (token "=3" 'Measure 21 11))
                            21)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 22 0)
                                  (token "4c" 'SpineData 22 1)
                                  (token "4c" 'SpineData 22 2)
                                  (token "4c" 'SpineData 22 3)
                                  (token "4c" 'SpineData 22 4)
                                  (token "4c" 'SpineData 22 5)
                                  (token "4c" 'SpineData 22 6)
                                  (token "4c" 'SpineData 22 7)
                                  (token "4c" 'SpineData 22 8)
                                  (token "4c" 'SpineData 22 9)
                                  (token "4c" 'SpineData 22 10)
                                  (token "4c" 'SpineData 22 11))
                            22)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 23 0)
                                  (token "4c" 'SpineData 23 1)
                                  (token "4c" 'SpineData 23 2)
                                  (token "4c" 'SpineData 23 3)
                                  (token "4c" 'SpineData 23 4)
                                  (token "4c" 'SpineData 23 5)
                                  (token "4c" 'SpineData 23 6)
                                  (token "4c" 'SpineData 23 7)
                                  (token "4c" 'SpineData 23 8)
                                  (token "4c" 'SpineData 23 9)
                                  (token "4c" 'SpineData 23 10)
                                  (token "4c" 'SpineData 23 11))
                            23)
                    (record "4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c\t4c" TOKEN
                            (list (token "4c" 'SpineData 24 0)
                                  (token "4c" 'SpineData 24 1)
                                  (token "4c" 'SpineData 24 2)
                                  (token "4c" 'SpineData 24 3)
                                  (token "4c" 'SpineData 24 4)
                                  (token "4c" 'SpineData 24 5)
                                  (token "4c" 'SpineData 24 6)
                                  (token "4c" 'SpineData 24 7)
                                  (token "4c" 'SpineData 24 8)
                                  (token "4c" 'SpineData 24 9)
                                  (token "4c" 'SpineData 24 10)
                                  (token "4c" 'SpineData 24 11))
                            24)
                    (record "*\t*\t*\t*\t*\t*\t*\t*\t*\t*\t*v\t*v" TOKEN
                            (list (token "*" 'NullInterpretation 25 0)
                                  (token "*" 'NullInterpretation 25 1)
                                  (token "*" 'NullInterpretation 25 2)
                                  (token "*" 'NullInterpretation 25 3)
                                  (token "*" 'NullInterpretation 25 4)
                                  (token "*" 'NullInterpretation 25 5)
                                  (token "*" 'NullInterpretation 25 6)
                                  (token "*" 'NullInterpretation 25 7)
                                  (token "*" 'NullInterpretation 25 8)
                                  (token "*" 'NullInterpretation 25 9)
                                  (token "*v" 'SpineJoin 25 10)
                                  (token "*v" 'SpineJoin 25 11))
                            25)
                    (record "*\t*\t*\t*\t*\t*\t*\t*\t*\t*v\t*v" TOKEN
                            (list (token "*" 'NullInterpretation 26 0)
                                  (token "*" 'NullInterpretation 26 1)
                                  (token "*" 'NullInterpretation 26 2)
                                  (token "*" 'NullInterpretation 26 3)
                                  (token "*" 'NullInterpretation 26 4)
                                  (token "*" 'NullInterpretation 26 5)
                                  (token "*" 'NullInterpretation 26 6)
                                  (token "*" 'NullInterpretation 26 7)
                                  (token "*" 'NullInterpretation 26 8)
                                  (token "*v" 'SpineJoin 26 9)
                                  (token "*v" 'SpineJoin 26 10))
                            26)
                    (record "*\t*\t*\t*\t*\t*\t*\t*\t*v\t*v" TOKEN
                            (list (token "*" 'NullInterpretation 27 0)
                                  (token "*" 'NullInterpretation 27 1)
                                  (token "*" 'NullInterpretation 27 2)
                                  (token "*" 'NullInterpretation 27 3)
                                  (token "*" 'NullInterpretation 27 4)
                                  (token "*" 'NullInterpretation 27 5)
                                  (token "*" 'NullInterpretation 27 6)
                                  (token "*" 'NullInterpretation 27 7)
                                  (token "*v" 'SpineJoin 27 8)
                                  (token "*v" 'SpineJoin 27 9))
                            27)
                    (record "*\t*\t*\t*\t*\t*\t*v\t*v\t*" TOKEN
                            (list (token "*" 'NullInterpretation 28 0)
                                  (token "*" 'NullInterpretation 28 1)
                                  (token "*" 'NullInterpretation 28 2)
                                  (token "*" 'NullInterpretation 28 3)
                                  (token "*" 'NullInterpretation 28 4)
                                  (token "*" 'NullInterpretation 28 5)
                                  (token "*v" 'SpineJoin 28 6)
                                  (token "*v" 'SpineJoin 28 7)
                                  (token "*" 'NullInterpretation 28 8))
                            28)
                    (record "*\t*\t*\t*\t*\t*v\t*v\t*" TOKEN
                            (list (token "*" 'NullInterpretation 29 0)
                                  (token "*" 'NullInterpretation 29 1)
                                  (token "*" 'NullInterpretation 29 2)
                                  (token "*" 'NullInterpretation 29 3)
                                  (token "*" 'NullInterpretation 29 4)
                                  (token "*v" 'SpineJoin 29 5)
                                  (token "*v" 'SpineJoin 29 6)
                                  (token "*" 'NullInterpretation 29 7))
                            29)
                    (record "*\t*\t*\t*\t*v\t*v\t*" TOKEN
                            (list (token "*" 'NullInterpretation 30 0)
                                  (token "*" 'NullInterpretation 30 1)
                                  (token "*" 'NullInterpretation 30 2)
                                  (token "*" 'NullInterpretation 30 3)
                                  (token "*v" 'SpineJoin 30 4)
                                  (token "*v" 'SpineJoin 30 5)
                                  (token "*" 'NullInterpretation 30 6))
                            30)
                    (record "*\t*\t*v\t*v\t*\t*" TOKEN
                            (list (token "*" 'NullInterpretation 31 0)
                                  (token "*" 'NullInterpretation 31 1)
                                  (token "*v" 'SpineJoin 31 2)
                                  (token "*v" 'SpineJoin 31 3)
                                  (token "*" 'NullInterpretation 31 4)
                                  (token "*" 'NullInterpretation 31 5))
                            31)
                    (record "*\t*v\t*v\t*\t*" TOKEN
                            (list (token "*" 'NullInterpretation 32 0)
                                  (token "*v" 'SpineJoin 32 1)
                                  (token "*v" 'SpineJoin 32 2)
                                  (token "*" 'NullInterpretation 32 3)
                                  (token "*" 'NullInterpretation 32 4))
                            32)
                    (record "*v\t*v\t*\t*" TOKEN
                            (list (token "*v" 'SpineJoin 33 0)
                                  (token "*v" 'SpineJoin 33 1)
                                  (token "*" 'NullInterpretation 33 2)
                                  (token "*" 'NullInterpretation 33 3))
                            33)
                    (record "==\t==\t==" TOKEN
                            (list (token "==" 'Measure 34 0)
                                  (token "==" 'Measure 34 1)
                                  (token "==" 'Measure 34 2))
                            34)
                    (record "*-\t*-\t*-" TOKEN
                            (list (token "*-" 'SpineTerminator 35 0)
                                  (token "*-" 'SpineTerminator 35 1)
                                  (token "*-" 'SpineTerminator 35 2))
                            35)))
(check-expect (hgraph->tokens
               (hgraph (root (list (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 0))
                                         (leaf (token "*clefG2" 'Clef 1 0))
                                         (leaf (token "*k[]" 'KeySignature 2 0))
                                         (leaf (token "*a:" 'KeyLabel 3 0))
                                         (leaf (token "*M3/4" 'TimeSignature 4 0))
                                         (parent (token "*^" 'SpineSplit 5 0)
                                                 (list (leaf (token "*" 'NullInterpretation 6 0))
                                                       (leaf (token "*" 'NullInterpretation 7 0))
                                                       (leaf (token "*" 'NullInterpretation 8 0))
                                                       (leaf (token "*" 'NullInterpretation 9 0))
                                                       (leaf (token "*" 'NullInterpretation 10 0))
                                                       (leaf (token "*" 'NullInterpretation 11 0))
                                                       (leaf (token "*" 'NullInterpretation 12 0))
                                                       (leaf (token "*" 'NullInterpretation 13 0))
                                                       (leaf (token "4c" 'SpineData 14 0))
                                                       (leaf (token "4c" 'SpineData 15 0))
                                                       (leaf (token "4c" 'SpineData 16 0))
                                                       (leaf (token "=2" 'Measure 17 0))
                                                       (leaf (token "4c" 'SpineData 18 0))
                                                       (leaf (token "4c" 'SpineData 19 0))
                                                       (leaf (token "4c" 'SpineData 20 0))
                                                       (leaf (token "=3" 'Measure 21 0))
                                                       (leaf (token "4c" 'SpineData 22 0))
                                                       (leaf (token "4c" 'SpineData 23 0))
                                                       (leaf (token "4c" 'SpineData 24 0))
                                                       (leaf (token "*" 'NullInterpretation 25 0))
                                                       (leaf (token "*" 'NullInterpretation 26 0))
                                                       (leaf (token "*" 'NullInterpretation 27 0))
                                                       (leaf (token "*" 'NullInterpretation 28 0))
                                                       (leaf (token "*" 'NullInterpretation 29 0))
                                                       (leaf (token "*" 'NullInterpretation 30 0))
                                                       (leaf (token "*" 'NullInterpretation 31 0))
                                                       (leaf (token "*" 'NullInterpretation 32 0))
                                                       (leaf (token "*v" 'SpineJoin 33 0)))
                                                 (list (parent (token "*^" 'SpineSplit 6 1)
                                                               (list (leaf (token "*" 'NullInterpretation 7 1))
                                                                     (leaf (token "*" 'NullInterpretation 8 1))
                                                                     (leaf (token "*" 'NullInterpretation 9 1))
                                                                     (leaf (token "*" 'NullInterpretation 10 1))
                                                                     (leaf (token "*" 'NullInterpretation 11 1))
                                                                     (leaf (token "*" 'NullInterpretation 12 1))
                                                                     (leaf (token "*" 'NullInterpretation 13 1))
                                                                     (leaf (token "4c" 'SpineData 14 1))
                                                                     (leaf (token "4c" 'SpineData 15 1))
                                                                     (leaf (token "4c" 'SpineData 16 1))
                                                                     (leaf (token "=2" 'Measure 17 1))
                                                                     (leaf (token "4c" 'SpineData 18 1))
                                                                     (leaf (token "4c" 'SpineData 19 1))
                                                                     (leaf (token "4c" 'SpineData 20 1))
                                                                     (leaf (token "=3" 'Measure 21 1))
                                                                     (leaf (token "4c" 'SpineData 22 1))
                                                                     (leaf (token "4c" 'SpineData 23 1))
                                                                     (leaf (token "4c" 'SpineData 24 1))
                                                                     (leaf (token "*" 'NullInterpretation 25 1))
                                                                     (leaf (token "*" 'NullInterpretation 26 1))
                                                                     (leaf (token "*" 'NullInterpretation 27 1))
                                                                     (leaf (token "*" 'NullInterpretation 28 1))
                                                                     (leaf (token "*" 'NullInterpretation 29 1))
                                                                     (leaf (token "*" 'NullInterpretation 30 1))
                                                                     (leaf (token "*" 'NullInterpretation 31 1))
                                                                     (leaf (token "*v" 'SpineJoin 32 1)))
                                                               (list (parent (token "*^" 'SpineSplit 7 2)
                                                                             (list (leaf (token "*" 'NullInterpretation 8 2))
                                                                                   (leaf (token "*" 'NullInterpretation 9 2))
                                                                                   (leaf (token "*" 'NullInterpretation 10 2))
                                                                                   (leaf (token "*" 'NullInterpretation 11 2))
                                                                                   (leaf (token "*" 'NullInterpretation 12 2))
                                                                                   (leaf (token "*" 'NullInterpretation 13 2))
                                                                                   (leaf (token "4c" 'SpineData 14 2))
                                                                                   (leaf (token "4c" 'SpineData 15 2))
                                                                                   (leaf (token "4c" 'SpineData 16 2))
                                                                                   (leaf (token "=2" 'Measure 17 2))
                                                                                   (leaf (token "4c" 'SpineData 18 2))
                                                                                   (leaf (token "4c" 'SpineData 19 2))
                                                                                   (leaf (token "4c" 'SpineData 20 2))
                                                                                   (leaf (token "=3" 'Measure 21 2))
                                                                                   (leaf (token "4c" 'SpineData 22 2))
                                                                                   (leaf (token "4c" 'SpineData 23 2))
                                                                                   (leaf (token "4c" 'SpineData 24 2))
                                                                                   (leaf (token "*" 'NullInterpretation 25 2))
                                                                                   (leaf (token "*" 'NullInterpretation 26 2))
                                                                                   (leaf (token "*" 'NullInterpretation 27 2))
                                                                                   (leaf (token "*" 'NullInterpretation 28 2))
                                                                                   (leaf (token "*" 'NullInterpretation 29 2))
                                                                                   (leaf (token "*" 'NullInterpretation 30 2))
                                                                                   (leaf (token "*v" 'SpineJoin 31 2)))
                                                                             (list (leaf (token "*" 'NullInterpretation 8 3))
                                                                                   (leaf (token "*" 'NullInterpretation 9 3))
                                                                                   (leaf (token "*" 'NullInterpretation 10 3))
                                                                                   (leaf (token "*" 'NullInterpretation 11 3))
                                                                                   (leaf (token "*" 'NullInterpretation 12 3))
                                                                                   (leaf (token "*" 'NullInterpretation 13 3))
                                                                                   (leaf (token "4c" 'SpineData 14 3))
                                                                                   (leaf (token "4c" 'SpineData 15 3))
                                                                                   (leaf (token "4c" 'SpineData 16 3))
                                                                                   (leaf (token "=2" 'Measure 17 3))
                                                                                   (leaf (token "4c" 'SpineData 18 3))
                                                                                   (leaf (token "4c" 'SpineData 19 3))
                                                                                   (leaf (token "4c" 'SpineData 20 3))
                                                                                   (leaf (token "=3" 'Measure 21 3))
                                                                                   (leaf (token "4c" 'SpineData 22 3))
                                                                                   (leaf (token "4c" 'SpineData 23 3))
                                                                                   (leaf (token "4c" 'SpineData 24 3))
                                                                                   (leaf (token "*" 'NullInterpretation 25 3))
                                                                                   (leaf (token "*" 'NullInterpretation 26 3))
                                                                                   (leaf (token "*" 'NullInterpretation 27 3))
                                                                                   (leaf (token "*" 'NullInterpretation 28 3))
                                                                                   (leaf (token "*" 'NullInterpretation 29 3))
                                                                                   (leaf (token "*" 'NullInterpretation 30 3))
                                                                                   (leaf (token "*v" 'SpineJoin 31 3))))
                                                                     (leaf (token "*v" 'SpineJoin 32 2))))
                                                       (leaf (token "*v" 'SpineJoin 33 1))))
                                         (leaf (token "==" 'Measure 34 0))
                                         (leaf (token "*-" 'SpineTerminator 35 0)))
                                   (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 1))
                                         (leaf (token "*clefG2" 'Clef 1 1))
                                         (leaf (token "*k[]" 'KeySignature 2 1))
                                         (leaf (token "*a:" 'KeyLabel 3 1))
                                         (leaf (token "*M3/4" 'TimeSignature 4 1))
                                         (leaf (token "*" 'NullInterpretation 5 1))
                                         (leaf (token "*" 'NullInterpretation 6 2))
                                         (leaf (token "*" 'NullInterpretation 7 3))
                                         (parent (token "*^" 'SpineSplit 8 4)
                                                 (list (leaf (token "*" 'NullInterpretation 9 4))
                                                       (leaf (token "*" 'NullInterpretation 10 4))
                                                       (leaf (token "*" 'NullInterpretation 11 4))
                                                       (leaf (token "*" 'NullInterpretation 12 4))
                                                       (leaf (token "*" 'NullInterpretation 13 4))
                                                       (leaf (token "4c" 'SpineData 14 4))
                                                       (leaf (token "4c" 'SpineData 15 4))
                                                       (leaf (token "4c" 'SpineData 16 4))
                                                       (leaf (token "=2" 'Measure 17 4))
                                                       (leaf (token "4c" 'SpineData 18 4))
                                                       (leaf (token "4c" 'SpineData 19 4))
                                                       (leaf (token "4c" 'SpineData 20 4))
                                                       (leaf (token "=3" 'Measure 21 4))
                                                       (leaf (token "4c" 'SpineData 22 4))
                                                       (leaf (token "4c" 'SpineData 23 4))
                                                       (leaf (token "4c" 'SpineData 24 4))
                                                       (leaf (token "*" 'NullInterpretation 25 4))
                                                       (leaf (token "*" 'NullInterpretation 26 4))
                                                       (leaf (token "*" 'NullInterpretation 27 4))
                                                       (leaf (token "*" 'NullInterpretation 28 4))
                                                       (leaf (token "*" 'NullInterpretation 29 4))
                                                       (leaf (token "*v" 'SpineJoin 30 4)))
                                                 (list (parent (token "*^" 'SpineSplit 9 5)
                                                               (list (leaf (token "*" 'NullInterpretation 10 5))
                                                                     (leaf (token "*" 'NullInterpretation 11 5))
                                                                     (leaf (token "*" 'NullInterpretation 12 5))
                                                                     (leaf (token "*" 'NullInterpretation 13 5))
                                                                     (leaf (token "4c" 'SpineData 14 5))
                                                                     (leaf (token "4c" 'SpineData 15 5))
                                                                     (leaf (token "4c" 'SpineData 16 5))
                                                                     (leaf (token "=2" 'Measure 17 5))
                                                                     (leaf (token "4c" 'SpineData 18 5))
                                                                     (leaf (token "4c" 'SpineData 19 5))
                                                                     (leaf (token "4c" 'SpineData 20 5))
                                                                     (leaf (token "=3" 'Measure 21 5))
                                                                     (leaf (token "4c" 'SpineData 22 5))
                                                                     (leaf (token "4c" 'SpineData 23 5))
                                                                     (leaf (token "4c" 'SpineData 24 5))
                                                                     (leaf (token "*" 'NullInterpretation 25 5))
                                                                     (leaf (token "*" 'NullInterpretation 26 5))
                                                                     (leaf (token "*" 'NullInterpretation 27 5))
                                                                     (leaf (token "*" 'NullInterpretation 28 5))
                                                                     (leaf (token "*v" 'SpineJoin 29 5)))
                                                               (list (parent (token "*^" 'SpineSplit 10 6)
                                                                             (list (leaf (token "*" 'NullInterpretation 11 6))
                                                                                   (leaf (token "*" 'NullInterpretation 12 6))
                                                                                   (leaf (token "*" 'NullInterpretation 13 6))
                                                                                   (leaf (token "4c" 'SpineData 14 6))
                                                                                   (leaf (token "4c" 'SpineData 15 6))
                                                                                   (leaf (token "4c" 'SpineData 16 6))
                                                                                   (leaf (token "=2" 'Measure 17 6))
                                                                                   (leaf (token "4c" 'SpineData 18 6))
                                                                                   (leaf (token "4c" 'SpineData 19 6))
                                                                                   (leaf (token "4c" 'SpineData 20 6))
                                                                                   (leaf (token "=3" 'Measure 21 6))
                                                                                   (leaf (token "4c" 'SpineData 22 6))
                                                                                   (leaf (token "4c" 'SpineData 23 6))
                                                                                   (leaf (token "4c" 'SpineData 24 6))
                                                                                   (leaf (token "*" 'NullInterpretation 25 6))
                                                                                   (leaf (token "*" 'NullInterpretation 26 6))
                                                                                   (leaf (token "*" 'NullInterpretation 27 6))
                                                                                   (leaf (token "*v" 'SpineJoin 28 6)))
                                                                             (list (leaf (token "*" 'NullInterpretation 11 7))
                                                                                   (leaf (token "*" 'NullInterpretation 12 7))
                                                                                   (leaf (token "*" 'NullInterpretation 13 7))
                                                                                   (leaf (token "4c" 'SpineData 14 7))
                                                                                   (leaf (token "4c" 'SpineData 15 7))
                                                                                   (leaf (token "4c" 'SpineData 16 7))
                                                                                   (leaf (token "=2" 'Measure 17 7))
                                                                                   (leaf (token "4c" 'SpineData 18 7))
                                                                                   (leaf (token "4c" 'SpineData 19 7))
                                                                                   (leaf (token "4c" 'SpineData 20 7))
                                                                                   (leaf (token "=3" 'Measure 21 7))
                                                                                   (leaf (token "4c" 'SpineData 22 7))
                                                                                   (leaf (token "4c" 'SpineData 23 7))
                                                                                   (leaf (token "4c" 'SpineData 24 7))
                                                                                   (leaf (token "*" 'NullInterpretation 25 7))
                                                                                   (leaf (token "*" 'NullInterpretation 26 7))
                                                                                   (leaf (token "*" 'NullInterpretation 27 7))
                                                                                   (leaf (token "*v" 'SpineJoin 28 7))))
                                                                     (leaf (token "*v" 'SpineJoin 29 6))))
                                                       (leaf (token "*v" 'SpineJoin 30 5))))
                                         (leaf (token "*" 'NullInterpretation 31 4))
                                         (leaf (token "*" 'NullInterpretation 32 3))
                                         (leaf (token "*" 'NullInterpretation 33 2))
                                         (leaf (token "==" 'Measure 34 1))
                                         (leaf (token "*-" 'SpineTerminator 35 1)))
                                   (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 2))
                                         (leaf (token "*clefG2" 'Clef 1 2))
                                         (leaf (token "*k[]" 'KeySignature 2 2))
                                         (leaf (token "*a:" 'KeyLabel 3 2))
                                         (leaf (token "*M3/4" 'TimeSignature 4 2))
                                         (leaf (token "*" 'NullInterpretation 5 2))
                                         (leaf (token "*" 'NullInterpretation 6 3))
                                         (leaf (token "*" 'NullInterpretation 7 4))
                                         (leaf (token "*" 'NullInterpretation 8 5))
                                         (leaf (token "*" 'NullInterpretation 9 6))
                                         (leaf (token "*" 'NullInterpretation 10 7))
                                         (parent (token "*^" 'SpineSplit 11 8)
                                                 (list (leaf (token "*" 'NullInterpretation 12 8))
                                                       (leaf (token "*" 'NullInterpretation 13 8))
                                                       (leaf (token "4c" 'SpineData 14 8))
                                                       (leaf (token "4c" 'SpineData 15 8))
                                                       (leaf (token "4c" 'SpineData 16 8))
                                                       (leaf (token "=2" 'Measure 17 8))
                                                       (leaf (token "4c" 'SpineData 18 8))
                                                       (leaf (token "4c" 'SpineData 19 8))
                                                       (leaf (token "4c" 'SpineData 20 8))
                                                       (leaf (token "=3" 'Measure 21 8))
                                                       (leaf (token "4c" 'SpineData 22 8))
                                                       (leaf (token "4c" 'SpineData 23 8))
                                                       (leaf (token "4c" 'SpineData 24 8))
                                                       (leaf (token "*" 'NullInterpretation 25 8))
                                                       (leaf (token "*" 'NullInterpretation 26 8))
                                                       (leaf (token "*v" 'SpineJoin 27 8)))
                                                 (list (parent (token "*^" 'SpineSplit 12 9)
                                                               (list (leaf (token "*" 'NullInterpretation 13 9))
                                                                     (leaf (token "4c" 'SpineData 14 9))
                                                                     (leaf (token "4c" 'SpineData 15 9))
                                                                     (leaf (token "4c" 'SpineData 16 9))
                                                                     (leaf (token "=2" 'Measure 17 9))
                                                                     (leaf (token "4c" 'SpineData 18 9))
                                                                     (leaf (token "4c" 'SpineData 19 9))
                                                                     (leaf (token "4c" 'SpineData 20 9))
                                                                     (leaf (token "=3" 'Measure 21 9))
                                                                     (leaf (token "4c" 'SpineData 22 9))
                                                                     (leaf (token "4c" 'SpineData 23 9))
                                                                     (leaf (token "4c" 'SpineData 24 9))
                                                                     (leaf (token "*" 'NullInterpretation 25 9))
                                                                     (leaf (token "*v" 'SpineJoin 26 9)))
                                                               (list (parent (token "*^" 'SpineSplit 13 10)
                                                                             (list (leaf (token "4c" 'SpineData 14 10))
                                                                                   (leaf (token "4c" 'SpineData 15 10))
                                                                                   (leaf (token "4c" 'SpineData 16 10))
                                                                                   (leaf (token "=2" 'Measure 17 10))
                                                                                   (leaf (token "4c" 'SpineData 18 10))
                                                                                   (leaf (token "4c" 'SpineData 19 10))
                                                                                   (leaf (token "4c" 'SpineData 20 10))
                                                                                   (leaf (token "=3" 'Measure 21 10))
                                                                                   (leaf (token "4c" 'SpineData 22 10))
                                                                                   (leaf (token "4c" 'SpineData 23 10))
                                                                                   (leaf (token "4c" 'SpineData 24 10))
                                                                                   (leaf (token "*v" 'SpineJoin 25 10)))
                                                                             (list (leaf (token "4c" 'SpineData 14 11))
                                                                                   (leaf (token "4c" 'SpineData 15 11))
                                                                                   (leaf (token "4c" 'SpineData 16 11))
                                                                                   (leaf (token "=2" 'Measure 17 11))
                                                                                   (leaf (token "4c" 'SpineData 18 11))
                                                                                   (leaf (token "4c" 'SpineData 19 11))
                                                                                   (leaf (token "4c" 'SpineData 20 11))
                                                                                   (leaf (token "=3" 'Measure 21 11))
                                                                                   (leaf (token "4c" 'SpineData 22 11))
                                                                                   (leaf (token "4c" 'SpineData 23 11))
                                                                                   (leaf (token "4c" 'SpineData 24 11))
                                                                                   (leaf (token "*v" 'SpineJoin 25 11))))
                                                                     (leaf (token "*v" 'SpineJoin 26 10))))
                                                       (leaf (token "*v" 'SpineJoin 27 9))))
                                         (leaf (token "*" 'NullInterpretation 28 8))
                                         (leaf (token "*" 'NullInterpretation 29 7))
                                         (leaf (token "*" 'NullInterpretation 30 6))
                                         (leaf (token "*" 'NullInterpretation 31 5))
                                         (leaf (token "*" 'NullInterpretation 32 4))
                                         (leaf (token "*" 'NullInterpretation 33 3))
                                         (leaf (token "==" 'Measure 34 2))
                                         (leaf (token "*-" 'SpineTerminator 35 2)))))))
              (list (list (token "**kern" EXCLUSIVE-INTERPRETATION 0 0)
                          (token "**kern" EXCLUSIVE-INTERPRETATION 0 1)
                          (token "**kern" EXCLUSIVE-INTERPRETATION 0 2))
                    (list (token "*clefG2" 'Clef 1 0)
                          (token "*clefG2" 'Clef 1 1)
                          (token "*clefG2" 'Clef 1 2))
                    (list (token "*k[]" 'KeySignature 2 0)
                          (token "*k[]" 'KeySignature 2 1)
                          (token "*k[]" 'KeySignature 2 2))
                    (list (token "*a:" 'KeyLabel 3 0)
                          (token "*a:" 'KeyLabel 3 1)
                          (token "*a:" 'KeyLabel 3 2))
                    (list (token "*M3/4" 'TimeSignature 4 0)
                          (token "*M3/4" 'TimeSignature 4 1)
                          (token "*M3/4" 'TimeSignature 4 2))
                    (list (token "*^" 'SpineSplit 5 0)
                          (token "*" 'NullInterpretation 5 1)
                          (token "*" 'NullInterpretation 5 2))
                    (list (token "*" 'NullInterpretation 6 0)
                          (token "*^" 'SpineSplit 6 1)
                          (token "*" 'NullInterpretation 6 2)
                          (token "*" 'NullInterpretation 6 3))
                    (list (token "*" 'NullInterpretation 7 0)
                          (token "*" 'NullInterpretation 7 1)
                          (token "*^" 'SpineSplit 7 2)
                          (token "*" 'NullInterpretation 7 3)
                          (token "*" 'NullInterpretation 7 4))
                    (list (token "*" 'NullInterpretation 8 0)
                          (token "*" 'NullInterpretation 8 1)
                          (token "*" 'NullInterpretation 8 2)
                          (token "*" 'NullInterpretation 8 3)
                          (token "*^" 'SpineSplit 8 4)
                          (token "*" 'NullInterpretation 8 5))
                    (list (token "*" 'NullInterpretation 9 0)
                          (token "*" 'NullInterpretation 9 1)
                          (token "*" 'NullInterpretation 9 2)
                          (token "*" 'NullInterpretation 9 3)
                          (token "*" 'NullInterpretation 9 4)
                          (token "*^" 'SpineSplit 9 5)
                          (token "*" 'NullInterpretation 9 6))
                    (list (token "*" 'NullInterpretation 10 0)
                          (token "*" 'NullInterpretation 10 1)
                          (token "*" 'NullInterpretation 10 2)
                          (token "*" 'NullInterpretation 10 3)
                          (token "*" 'NullInterpretation 10 4)
                          (token "*" 'NullInterpretation 10 5)
                          (token "*^" 'SpineSplit 10 6)
                          (token "*" 'NullInterpretation 10 7))
                    (list (token "*" 'NullInterpretation 11 0)
                          (token "*" 'NullInterpretation 11 1)
                          (token "*" 'NullInterpretation 11 2)
                          (token "*" 'NullInterpretation 11 3)
                          (token "*" 'NullInterpretation 11 4)
                          (token "*" 'NullInterpretation 11 5)
                          (token "*" 'NullInterpretation 11 6)
                          (token "*" 'NullInterpretation 11 7)
                          (token "*^" 'SpineSplit 11 8))
                    (list (token "*" 'NullInterpretation 12 0)
                          (token "*" 'NullInterpretation 12 1)
                          (token "*" 'NullInterpretation 12 2)
                          (token "*" 'NullInterpretation 12 3)
                          (token "*" 'NullInterpretation 12 4)
                          (token "*" 'NullInterpretation 12 5)
                          (token "*" 'NullInterpretation 12 6)
                          (token "*" 'NullInterpretation 12 7)
                          (token "*" 'NullInterpretation 12 8)
                          (token "*^" 'SpineSplit 12 9))
                    (list (token "*" 'NullInterpretation 13 0)
                          (token "*" 'NullInterpretation 13 1)
                          (token "*" 'NullInterpretation 13 2)
                          (token "*" 'NullInterpretation 13 3)
                          (token "*" 'NullInterpretation 13 4)
                          (token "*" 'NullInterpretation 13 5)
                          (token "*" 'NullInterpretation 13 6)
                          (token "*" 'NullInterpretation 13 7)
                          (token "*" 'NullInterpretation 13 8)
                          (token "*" 'NullInterpretation 13 9)
                          (token "*^" 'SpineSplit 13 10))
                    (list (token "4c" 'SpineData 14 0)
                          (token "4c" 'SpineData 14 1)
                          (token "4c" 'SpineData 14 2)
                          (token "4c" 'SpineData 14 3)
                          (token "4c" 'SpineData 14 4)
                          (token "4c" 'SpineData 14 5)
                          (token "4c" 'SpineData 14 6)
                          (token "4c" 'SpineData 14 7)
                          (token "4c" 'SpineData 14 8)
                          (token "4c" 'SpineData 14 9)
                          (token "4c" 'SpineData 14 10)
                          (token "4c" 'SpineData 14 11))
                    (list (token "4c" 'SpineData 15 0)
                          (token "4c" 'SpineData 15 1)
                          (token "4c" 'SpineData 15 2)
                          (token "4c" 'SpineData 15 3)
                          (token "4c" 'SpineData 15 4)
                          (token "4c" 'SpineData 15 5)
                          (token "4c" 'SpineData 15 6)
                          (token "4c" 'SpineData 15 7)
                          (token "4c" 'SpineData 15 8)
                          (token "4c" 'SpineData 15 9)
                          (token "4c" 'SpineData 15 10)
                          (token "4c" 'SpineData 15 11))
                    (list (token "4c" 'SpineData 16 0)
                          (token "4c" 'SpineData 16 1)
                          (token "4c" 'SpineData 16 2)
                          (token "4c" 'SpineData 16 3)
                          (token "4c" 'SpineData 16 4)
                          (token "4c" 'SpineData 16 5)
                          (token "4c" 'SpineData 16 6)
                          (token "4c" 'SpineData 16 7)
                          (token "4c" 'SpineData 16 8)
                          (token "4c" 'SpineData 16 9)
                          (token "4c" 'SpineData 16 10)
                          (token "4c" 'SpineData 16 11))
                    (list (token "=2" 'Measure 17 0)
                          (token "=2" 'Measure 17 1)
                          (token "=2" 'Measure 17 2)
                          (token "=2" 'Measure 17 3)
                          (token "=2" 'Measure 17 4)
                          (token "=2" 'Measure 17 5)
                          (token "=2" 'Measure 17 6)
                          (token "=2" 'Measure 17 7)
                          (token "=2" 'Measure 17 8)
                          (token "=2" 'Measure 17 9)
                          (token "=2" 'Measure 17 10)
                          (token "=2" 'Measure 17 11))
                    (list (token "4c" 'SpineData 18 0)
                          (token "4c" 'SpineData 18 1)
                          (token "4c" 'SpineData 18 2)
                          (token "4c" 'SpineData 18 3)
                          (token "4c" 'SpineData 18 4)
                          (token "4c" 'SpineData 18 5)
                          (token "4c" 'SpineData 18 6)
                          (token "4c" 'SpineData 18 7)
                          (token "4c" 'SpineData 18 8)
                          (token "4c" 'SpineData 18 9)
                          (token "4c" 'SpineData 18 10)
                          (token "4c" 'SpineData 18 11))
                    (list (token "4c" 'SpineData 19 0)
                          (token "4c" 'SpineData 19 1)
                          (token "4c" 'SpineData 19 2)
                          (token "4c" 'SpineData 19 3)
                          (token "4c" 'SpineData 19 4)
                          (token "4c" 'SpineData 19 5)
                          (token "4c" 'SpineData 19 6)
                          (token "4c" 'SpineData 19 7)
                          (token "4c" 'SpineData 19 8)
                          (token "4c" 'SpineData 19 9)
                          (token "4c" 'SpineData 19 10)
                          (token "4c" 'SpineData 19 11))
                    (list (token "4c" 'SpineData 20 0)
                          (token "4c" 'SpineData 20 1)
                          (token "4c" 'SpineData 20 2)
                          (token "4c" 'SpineData 20 3)
                          (token "4c" 'SpineData 20 4)
                          (token "4c" 'SpineData 20 5)
                          (token "4c" 'SpineData 20 6)
                          (token "4c" 'SpineData 20 7)
                          (token "4c" 'SpineData 20 8)
                          (token "4c" 'SpineData 20 9)
                          (token "4c" 'SpineData 20 10)
                          (token "4c" 'SpineData 20 11))
                    (list (token "=3" 'Measure 21 0)
                          (token "=3" 'Measure 21 1)
                          (token "=3" 'Measure 21 2)
                          (token "=3" 'Measure 21 3)
                          (token "=3" 'Measure 21 4)
                          (token "=3" 'Measure 21 5)
                          (token "=3" 'Measure 21 6)
                          (token "=3" 'Measure 21 7)
                          (token "=3" 'Measure 21 8)
                          (token "=3" 'Measure 21 9)
                          (token "=3" 'Measure 21 10)
                          (token "=3" 'Measure 21 11))
                    (list (token "4c" 'SpineData 22 0)
                          (token "4c" 'SpineData 22 1)
                          (token "4c" 'SpineData 22 2)
                          (token "4c" 'SpineData 22 3)
                          (token "4c" 'SpineData 22 4)
                          (token "4c" 'SpineData 22 5)
                          (token "4c" 'SpineData 22 6)
                          (token "4c" 'SpineData 22 7)
                          (token "4c" 'SpineData 22 8)
                          (token "4c" 'SpineData 22 9)
                          (token "4c" 'SpineData 22 10)
                          (token "4c" 'SpineData 22 11))
                    (list (token "4c" 'SpineData 23 0)
                          (token "4c" 'SpineData 23 1)
                          (token "4c" 'SpineData 23 2)
                          (token "4c" 'SpineData 23 3)
                          (token "4c" 'SpineData 23 4)
                          (token "4c" 'SpineData 23 5)
                          (token "4c" 'SpineData 23 6)
                          (token "4c" 'SpineData 23 7)
                          (token "4c" 'SpineData 23 8)
                          (token "4c" 'SpineData 23 9)
                          (token "4c" 'SpineData 23 10)
                          (token "4c" 'SpineData 23 11))
                    (list (token "4c" 'SpineData 24 0)
                          (token "4c" 'SpineData 24 1)
                          (token "4c" 'SpineData 24 2)
                          (token "4c" 'SpineData 24 3)
                          (token "4c" 'SpineData 24 4)
                          (token "4c" 'SpineData 24 5)
                          (token "4c" 'SpineData 24 6)
                          (token "4c" 'SpineData 24 7)
                          (token "4c" 'SpineData 24 8)
                          (token "4c" 'SpineData 24 9)
                          (token "4c" 'SpineData 24 10)
                          (token "4c" 'SpineData 24 11))
                    (list (token "*" 'NullInterpretation 25 0)
                          (token "*" 'NullInterpretation 25 1)
                          (token "*" 'NullInterpretation 25 2)
                          (token "*" 'NullInterpretation 25 3)
                          (token "*" 'NullInterpretation 25 4)
                          (token "*" 'NullInterpretation 25 5)
                          (token "*" 'NullInterpretation 25 6)
                          (token "*" 'NullInterpretation 25 7)
                          (token "*" 'NullInterpretation 25 8)
                          (token "*" 'NullInterpretation 25 9)
                          (token "*v" 'SpineJoin 25 10)
                          (token "*v" 'SpineJoin 25 11))
                    (list (token "*" 'NullInterpretation 26 0)
                          (token "*" 'NullInterpretation 26 1)
                          (token "*" 'NullInterpretation 26 2)
                          (token "*" 'NullInterpretation 26 3)
                          (token "*" 'NullInterpretation 26 4)
                          (token "*" 'NullInterpretation 26 5)
                          (token "*" 'NullInterpretation 26 6)
                          (token "*" 'NullInterpretation 26 7)
                          (token "*" 'NullInterpretation 26 8)
                          (token "*v" 'SpineJoin 26 9)
                          (token "*v" 'SpineJoin 26 10))
                    (list (token "*" 'NullInterpretation 27 0)
                          (token "*" 'NullInterpretation 27 1)
                          (token "*" 'NullInterpretation 27 2)
                          (token "*" 'NullInterpretation 27 3)
                          (token "*" 'NullInterpretation 27 4)
                          (token "*" 'NullInterpretation 27 5)
                          (token "*" 'NullInterpretation 27 6)
                          (token "*" 'NullInterpretation 27 7)
                          (token "*v" 'SpineJoin 27 8)
                          (token "*v" 'SpineJoin 27 9))
                    (list (token "*" 'NullInterpretation 28 0)
                          (token "*" 'NullInterpretation 28 1)
                          (token "*" 'NullInterpretation 28 2)
                          (token "*" 'NullInterpretation 28 3)
                          (token "*" 'NullInterpretation 28 4)
                          (token "*" 'NullInterpretation 28 5)
                          (token "*v" 'SpineJoin 28 6)
                          (token "*v" 'SpineJoin 28 7)
                          (token "*" 'NullInterpretation 28 8))
                    (list (token "*" 'NullInterpretation 29 0)
                          (token "*" 'NullInterpretation 29 1)
                          (token "*" 'NullInterpretation 29 2)
                          (token "*" 'NullInterpretation 29 3)
                          (token "*" 'NullInterpretation 29 4)
                          (token "*v" 'SpineJoin 29 5)
                          (token "*v" 'SpineJoin 29 6)
                          (token "*" 'NullInterpretation 29 7))
                    (list (token "*" 'NullInterpretation 30 0)
                          (token "*" 'NullInterpretation 30 1)
                          (token "*" 'NullInterpretation 30 2)
                          (token "*" 'NullInterpretation 30 3)
                          (token "*v" 'SpineJoin 30 4)
                          (token "*v" 'SpineJoin 30 5)
                          (token "*" 'NullInterpretation 30 6))
                    (list (token "*" 'NullInterpretation 31 0)
                          (token "*" 'NullInterpretation 31 1)
                          (token "*v" 'SpineJoin 31 2)
                          (token "*v" 'SpineJoin 31 3)
                          (token "*" 'NullInterpretation 31 4)
                          (token "*" 'NullInterpretation 31 5))
                    (list (token "*" 'NullInterpretation 32 0)
                          (token "*v" 'SpineJoin 32 1)
                          (token "*v" 'SpineJoin 32 2)
                          (token "*" 'NullInterpretation 32 3)
                          (token "*" 'NullInterpretation 32 4))
                    (list (token "*v" 'SpineJoin 33 0)
                          (token "*v" 'SpineJoin 33 1)
                          (token "*" 'NullInterpretation 33 2)
                          (token "*" 'NullInterpretation 33 3))
                    (list (token "==" 'Measure 34 0)
                          (token "==" 'Measure 34 1)
                          (token "==" 'Measure 34 2))
                    (list (token "*-" 'SpineTerminator 35 0)
                          (token "*-" 'SpineTerminator 35 1)
                          (token "*-" 'SpineTerminator 35 2))))
#|
(check-expect (hfile->hgraph (path->hfile "../../data/count/three-spines-three-splits.krn"))
              (hgraph (root (list (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 0))
                                        (leaf (token "*clefG2" 'Clef 1 0))
                                        (leaf (token "*k[]" 'KeySignature 2 0))
                                        (leaf (token "*a:" 'KeyLabel 3 0))
                                        (leaf (token "*M3/4" 'TimeSignature 4 0))
                                        (parent (token "*^" 'SpineSplit 5 0)
                                                (list (leaf (token "*" 'NullInterpretation 6 0))
                                                      (leaf (token "*" 'NullInterpretation 7 0))
                                                      (leaf (token "*" 'NullInterpretation 8 0))
                                                      (leaf (token "*" 'NullInterpretation 9 0))
                                                      (leaf (token "*" 'NullInterpretation 10 0))
                                                      (leaf (token "*" 'NullInterpretation 11 0))
                                                      (leaf (token "*" 'NullInterpretation 12 0))
                                                      (leaf (token "*" 'NullInterpretation 13 0))
                                                      (leaf (token "4c" 'SpineData 14 0))
                                                      (leaf (token "4c" 'SpineData 15 0))
                                                      (leaf (token "4c" 'SpineData 16 0))
                                                      (leaf (token "=2" 'Measure 17 0))
                                                      (leaf (token "4c" 'SpineData 18 0))
                                                      (leaf (token "4c" 'SpineData 19 0))
                                                      (leaf (token "4c" 'SpineData 20 0))
                                                      (leaf (token "=3" 'Measure 21 0))
                                                      (leaf (token "4c" 'SpineData 22 0))
                                                      (leaf (token "4c" 'SpineData 23 0))
                                                      (leaf (token "4c" 'SpineData 24 0))
                                                      (leaf (token "*" 'NullInterpretation 25 0))
                                                      (leaf (token "*" 'NullInterpretation 26 0))
                                                      (leaf (token "*" 'NullInterpretation 27 0))
                                                      (leaf (token "*" 'NullInterpretation 28 0))
                                                      (leaf (token "*" 'NullInterpretation 29 0))
                                                      (leaf (token "*" 'NullInterpretation 30 0))
                                                      (leaf (token "*" 'NullInterpretation 31 0))
                                                      (leaf (token "*" 'NullInterpretation 32 0))
                                                      (leaf (token "*v" 'SpineJoin 33 0)))
                                                (list (parent (token "*^" 'SpineSplit 6 1)
                                                              (list (leaf (token "*" 'NullInterpretation 7 1))
                                                                    (leaf (token "*" 'NullInterpretation 8 1))
                                                                    (leaf (token "*" 'NullInterpretation 9 1))
                                                                    (leaf (token "*" 'NullInterpretation 10 1))
                                                                    (leaf (token "*" 'NullInterpretation 11 1))
                                                                    (leaf (token "*" 'NullInterpretation 12 1))
                                                                    (leaf (token "*" 'NullInterpretation 13 1))
                                                                    (leaf (token "4c" 'SpineData 14 1))
                                                                    (leaf (token "4c" 'SpineData 15 1))
                                                                    (leaf (token "4c" 'SpineData 16 1))
                                                                    (leaf (token "=2" 'Measure 17 1))
                                                                    (leaf (token "4c" 'SpineData 18 1))
                                                                    (leaf (token "4c" 'SpineData 19 1))
                                                                    (leaf (token "4c" 'SpineData 20 1))
                                                                    (leaf (token "=3" 'Measure 21 1))
                                                                    (leaf (token "4c" 'SpineData 22 1))
                                                                    (leaf (token "4c" 'SpineData 23 1))
                                                                    (leaf (token "4c" 'SpineData 24 1))
                                                                    (leaf (token "*" 'NullInterpretation 25 1))
                                                                    (leaf (token "*" 'NullInterpretation 26 1))
                                                                    (leaf (token "*" 'NullInterpretation 27 1))
                                                                    (leaf (token "*" 'NullInterpretation 28 1))
                                                                    (leaf (token "*" 'NullInterpretation 29 1))
                                                                    (leaf (token "*" 'NullInterpretation 30 1))
                                                                    (leaf (token "*" 'NullInterpretation 31 1))
                                                                    (leaf (token "*v" 'SpineJoin 32 1)))
                                                              (list (parent (token "*^" 'SpineSplit 7 2)
                                                                            (list (leaf (token "*" 'NullInterpretation 8 2))
                                                                                  (leaf (token "*" 'NullInterpretation 9 2))
                                                                                  (leaf (token "*" 'NullInterpretation 10 2))
                                                                                  (leaf (token "*" 'NullInterpretation 11 2))
                                                                                  (leaf (token "*" 'NullInterpretation 12 2))
                                                                                  (leaf (token "*" 'NullInterpretation 13 2))
                                                                                  (leaf (token "4c" 'SpineData 14 2))
                                                                                  (leaf (token "4c" 'SpineData 15 2))
                                                                                  (leaf (token "4c" 'SpineData 16 2))
                                                                                  (leaf (token "=2" 'Measure 17 2))
                                                                                  (leaf (token "4c" 'SpineData 18 2))
                                                                                  (leaf (token "4c" 'SpineData 19 2))
                                                                                  (leaf (token "4c" 'SpineData 20 2))
                                                                                  (leaf (token "=3" 'Measure 21 2))
                                                                                  (leaf (token "4c" 'SpineData 22 2))
                                                                                  (leaf (token "4c" 'SpineData 23 2))
                                                                                  (leaf (token "4c" 'SpineData 24 2))
                                                                                  (leaf (token "*" 'NullInterpretation 25 2))
                                                                                  (leaf (token "*" 'NullInterpretation 26 2))
                                                                                  (leaf (token "*" 'NullInterpretation 27 2))
                                                                                  (leaf (token "*" 'NullInterpretation 28 2))
                                                                                  (leaf (token "*" 'NullInterpretation 29 2))
                                                                                  (leaf (token "*" 'NullInterpretation 30 2))
                                                                                  (leaf (token "*v" 'SpineJoin 31 2)))
                                                                            (list (leaf (token "*" 'NullInterpretation 8 3))
                                                                                  (leaf (token "*" 'NullInterpretation 9 3))
                                                                                  (leaf (token "*" 'NullInterpretation 10 3))
                                                                                  (leaf (token "*" 'NullInterpretation 11 3))
                                                                                  (leaf (token "*" 'NullInterpretation 12 3))
                                                                                  (leaf (token "*" 'NullInterpretation 13 3))
                                                                                  (leaf (token "4c" 'SpineData 14 3))
                                                                                  (leaf (token "4c" 'SpineData 15 3))
                                                                                  (leaf (token "4c" 'SpineData 16 3))
                                                                                  (leaf (token "=2" 'Measure 17 3))
                                                                                  (leaf (token "4c" 'SpineData 18 3))
                                                                                  (leaf (token "4c" 'SpineData 19 3))
                                                                                  (leaf (token "4c" 'SpineData 20 3))
                                                                                  (leaf (token "=3" 'Measure 21 3))
                                                                                  (leaf (token "4c" 'SpineData 22 3))
                                                                                  (leaf (token "4c" 'SpineData 23 3))
                                                                                  (leaf (token "4c" 'SpineData 24 3))
                                                                                  (leaf (token "*" 'NullInterpretation 25 3))
                                                                                  (leaf (token "*" 'NullInterpretation 26 3))
                                                                                  (leaf (token "*" 'NullInterpretation 27 3))
                                                                                  (leaf (token "*" 'NullInterpretation 28 3))
                                                                                  (leaf (token "*" 'NullInterpretation 29 3))
                                                                                  (leaf (token "*" 'NullInterpretation 30 3))
                                                                                  (leaf (token "*v" 'SpineJoin 31 3))))
                                                                    (leaf (token "*v" 'SpineJoin 32 2))))
                                                      (leaf (token "*v" 'SpineJoin 33 1))))
                                        (leaf (token "==" 'Measure 34 0))
                                        (leaf (token "*-" 'SpineTerminator 35 0)))
                                  (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 1))
                                        (leaf (token "*clefG2" 'Clef 1 1))
                                        (leaf (token "*k[]" 'KeySignature 2 1))
                                        (leaf (token "*a:" 'KeyLabel 3 1))
                                        (leaf (token "*M3/4" 'TimeSignature 4 1))
                                        (leaf (token "*" 'NullInterpretation 5 1))
                                        (leaf (token "*" 'NullInterpretation 6 2))
                                        (leaf (token "*" 'NullInterpretation 7 3))
                                        (parent (token "*^" 'SpineSplit 8 4)
                                                (list (leaf (token "*" 'NullInterpretation 9 4))
                                                      (leaf (token "*" 'NullInterpretation 10 4))
                                                      (leaf (token "*" 'NullInterpretation 11 4))
                                                      (leaf (token "*" 'NullInterpretation 12 4))
                                                      (leaf (token "*" 'NullInterpretation 13 4))
                                                      (leaf (token "4c" 'SpineData 14 4))
                                                      (leaf (token "4c" 'SpineData 15 4))
                                                      (leaf (token "4c" 'SpineData 16 4))
                                                      (leaf (token "=2" 'Measure 17 4))
                                                      (leaf (token "4c" 'SpineData 18 4))
                                                      (leaf (token "4c" 'SpineData 19 4))
                                                      (leaf (token "4c" 'SpineData 20 4))
                                                      (leaf (token "=3" 'Measure 21 4))
                                                      (leaf (token "4c" 'SpineData 22 4))
                                                      (leaf (token "4c" 'SpineData 23 4))
                                                      (leaf (token "4c" 'SpineData 24 4))
                                                      (leaf (token "*" 'NullInterpretation 25 4))
                                                      (leaf (token "*" 'NullInterpretation 26 4))
                                                      (leaf (token "*" 'NullInterpretation 27 4))
                                                      (leaf (token "*" 'NullInterpretation 28 4))
                                                      (leaf (token "*" 'NullInterpretation 29 4))
                                                      (leaf (token "*v" 'SpineJoin 30 4)))
                                                (list (parent (token "*^" 'SpineSplit 9 5)
                                                              (list (leaf (token "*" 'NullInterpretation 10 5))
                                                                    (leaf (token "*" 'NullInterpretation 11 5))
                                                                    (leaf (token "*" 'NullInterpretation 12 5))
                                                                    (leaf (token "*" 'NullInterpretation 13 5))
                                                                    (leaf (token "4c" 'SpineData 14 5))
                                                                    (leaf (token "4c" 'SpineData 15 5))
                                                                    (leaf (token "4c" 'SpineData 16 5))
                                                                    (leaf (token "=2" 'Measure 17 5))
                                                                    (leaf (token "4c" 'SpineData 18 5))
                                                                    (leaf (token "4c" 'SpineData 19 5))
                                                                    (leaf (token "4c" 'SpineData 20 5))
                                                                    (leaf (token "=3" 'Measure 21 5))
                                                                    (leaf (token "4c" 'SpineData 22 5))
                                                                    (leaf (token "4c" 'SpineData 23 5))
                                                                    (leaf (token "4c" 'SpineData 24 5))
                                                                    (leaf (token "*" 'NullInterpretation 25 5))
                                                                    (leaf (token "*" 'NullInterpretation 26 5))
                                                                    (leaf (token "*" 'NullInterpretation 27 5))
                                                                    (leaf (token "*" 'NullInterpretation 28 5))
                                                                    (leaf (token "*v" 'SpineJoin 29 5)))
                                                              (list (parent (token "*^" 'SpineSplit 10 6)
                                                                            (list (leaf (token "*" 'NullInterpretation 11 6))
                                                                                  (leaf (token "*" 'NullInterpretation 12 6))
                                                                                  (leaf (token "*" 'NullInterpretation 13 6))
                                                                                  (leaf (token "4c" 'SpineData 14 6))
                                                                                  (leaf (token "4c" 'SpineData 15 6))
                                                                                  (leaf (token "4c" 'SpineData 16 6))
                                                                                  (leaf (token "=2" 'Measure 17 6))
                                                                                  (leaf (token "4c" 'SpineData 18 6))
                                                                                  (leaf (token "4c" 'SpineData 19 6))
                                                                                  (leaf (token "4c" 'SpineData 20 6))
                                                                                  (leaf (token "=3" 'Measure 21 6))
                                                                                  (leaf (token "4c" 'SpineData 22 6))
                                                                                  (leaf (token "4c" 'SpineData 23 6))
                                                                                  (leaf (token "4c" 'SpineData 24 6))
                                                                                  (leaf (token "*" 'NullInterpretation 25 6))
                                                                                  (leaf (token "*" 'NullInterpretation 26 6))
                                                                                  (leaf (token "*" 'NullInterpretation 27 6))
                                                                                  (leaf (token "*v" 'SpineJoin 28 6)))
                                                                            (list (leaf (token "*" 'NullInterpretation 11 7))
                                                                                  (leaf (token "*" 'NullInterpretation 12 7))
                                                                                  (leaf (token "*" 'NullInterpretation 13 7))
                                                                                  (leaf (token "4c" 'SpineData 14 7))
                                                                                  (leaf (token "4c" 'SpineData 15 7))
                                                                                  (leaf (token "4c" 'SpineData 16 7))
                                                                                  (leaf (token "=2" 'Measure 17 7))
                                                                                  (leaf (token "4c" 'SpineData 18 7))
                                                                                  (leaf (token "4c" 'SpineData 19 7))
                                                                                  (leaf (token "4c" 'SpineData 20 7))
                                                                                  (leaf (token "=3" 'Measure 21 7))
                                                                                  (leaf (token "4c" 'SpineData 22 7))
                                                                                  (leaf (token "4c" 'SpineData 23 7))
                                                                                  (leaf (token "4c" 'SpineData 24 7))
                                                                                  (leaf (token "*" 'NullInterpretation 25 7))
                                                                                  (leaf (token "*" 'NullInterpretation 26 7))
                                                                                  (leaf (token "*" 'NullInterpretation 27 7))
                                                                                  (leaf (token "*v" 'SpineJoin 28 7))))
                                                                    (leaf (token "*v" 'SpineJoin 29 6))))
                                                      (leaf (token "*v" 'SpineJoin 30 5))))
                                        (leaf (token "*" 'NullInterpretation 31 4))
                                        (leaf (token "*" 'NullInterpretation 32 3))
                                        (leaf (token "*" 'NullInterpretation 33 2))
                                        (leaf (token "==" 'Measure 34 1))
                                        (leaf (token "*-" 'SpineTerminator 35 1)))
                                  (list (leaf (token "**kern" EXCLUSIVE-INTERPRETATION 0 2))
                                        (leaf (token "*clefG2" 'Clef 1 2))
                                        (leaf (token "*k[]" 'KeySignature 2 2))
                                        (leaf (token "*a:" 'KeyLabel 3 2))
                                        (leaf (token "*M3/4" 'TimeSignature 4 2))
                                        (leaf (token "*" 'NullInterpretation 5 2))
                                        (leaf (token "*" 'NullInterpretation 6 3))
                                        (leaf (token "*" 'NullInterpretation 7 4))
                                        (leaf (token "*" 'NullInterpretation 8 5))
                                        (leaf (token "*" 'NullInterpretation 9 6))
                                        (leaf (token "*" 'NullInterpretation 10 7))
                                        (parent (token "*^" 'SpineSplit 11 8)
                                                (list (leaf (token "*" 'NullInterpretation 12 8))
                                                      (leaf (token "*" 'NullInterpretation 13 8))
                                                      (leaf (token "4c" 'SpineData 14 8))
                                                      (leaf (token "4c" 'SpineData 15 8))
                                                      (leaf (token "4c" 'SpineData 16 8))
                                                      (leaf (token "=2" 'Measure 17 8))
                                                      (leaf (token "4c" 'SpineData 18 8))
                                                      (leaf (token "4c" 'SpineData 19 8))
                                                      (leaf (token "4c" 'SpineData 20 8))
                                                      (leaf (token "=3" 'Measure 21 8))
                                                      (leaf (token "4c" 'SpineData 22 8))
                                                      (leaf (token "4c" 'SpineData 23 8))
                                                      (leaf (token "4c" 'SpineData 24 8))
                                                      (leaf (token "*" 'NullInterpretation 25 8))
                                                      (leaf (token "*" 'NullInterpretation 26 8))
                                                      (leaf (token "*v" 'SpineJoin 27 8)))
                                                (list (parent (token "*^" 'SpineSplit 12 9)
                                                              (list (leaf (token "*" 'NullInterpretation 13 9))
                                                                    (leaf (token "4c" 'SpineData 14 9))
                                                                    (leaf (token "4c" 'SpineData 15 9))
                                                                    (leaf (token "4c" 'SpineData 16 9))
                                                                    (leaf (token "=2" 'Measure 17 9))
                                                                    (leaf (token "4c" 'SpineData 18 9))
                                                                    (leaf (token "4c" 'SpineData 19 9))
                                                                    (leaf (token "4c" 'SpineData 20 9))
                                                                    (leaf (token "=3" 'Measure 21 9))
                                                                    (leaf (token "4c" 'SpineData 22 9))
                                                                    (leaf (token "4c" 'SpineData 23 9))
                                                                    (leaf (token "4c" 'SpineData 24 9))
                                                                    (leaf (token "*" 'NullInterpretation 25 9))
                                                                    (leaf (token "*v" 'SpineJoin 26 9)))
                                                              (list (parent (token "*^" 'SpineSplit 13 10)
                                                                            (list (leaf (token "4c" 'SpineData 14 10))
                                                                                  (leaf (token "4c" 'SpineData 15 10))
                                                                                  (leaf (token "4c" 'SpineData 16 10))
                                                                                  (leaf (token "=2" 'Measure 17 10))
                                                                                  (leaf (token "4c" 'SpineData 18 10))
                                                                                  (leaf (token "4c" 'SpineData 19 10))
                                                                                  (leaf (token "4c" 'SpineData 20 10))
                                                                                  (leaf (token "=3" 'Measure 21 10))
                                                                                  (leaf (token "4c" 'SpineData 22 10))
                                                                                  (leaf (token "4c" 'SpineData 23 10))
                                                                                  (leaf (token "4c" 'SpineData 24 10))
                                                                                  (leaf (token "*v" 'SpineJoin 25 10)))
                                                                            (list (leaf (token "4c" 'SpineData 14 11))
                                                                                  (leaf (token "4c" 'SpineData 15 11))
                                                                                  (leaf (token "4c" 'SpineData 16 11))
                                                                                  (leaf (token "=2" 'Measure 17 11))
                                                                                  (leaf (token "4c" 'SpineData 18 11))
                                                                                  (leaf (token "4c" 'SpineData 19 11))
                                                                                  (leaf (token "4c" 'SpineData 20 11))
                                                                                  (leaf (token "=3" 'Measure 21 11))
                                                                                  (leaf (token "4c" 'SpineData 22 11))
                                                                                  (leaf (token "4c" 'SpineData 23 11))
                                                                                  (leaf (token "4c" 'SpineData 24 11))
                                                                                  (leaf (token "*v" 'SpineJoin 25 11))))
                                                                    (leaf (token "*v" 'SpineJoin 26 10))))
                                                      (leaf (token "*v" 'SpineJoin 27 9))))
                                        (leaf (token "*" 'NullInterpretation 28 8))
                                        (leaf (token "*" 'NullInterpretation 29 7))
                                        (leaf (token "*" 'NullInterpretation 30 6))
                                        (leaf (token "*" 'NullInterpretation 31 5))
                                        (leaf (token "*" 'NullInterpretation 32 4))
                                        (leaf (token "*" 'NullInterpretation 33 3))
                                        (leaf (token "==" 'Measure 34 2))
                                        (leaf (token "*-" 'SpineTerminator 35 2)))))))
|#
(check-expect (gspines->linked-spines (spine-parser (path->hfile "../../data/count/three-spines-three-splits.krn"))
                                      (path->hfile "../../data/count/three-spines-three-splits.krn"))
              (list (linked-spine KERN-0-0) (linked-spine KERN-0-1) (linked-spine KERN-0-2)))

(test)
